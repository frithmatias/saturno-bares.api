(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{T8Xv:function(t,e,i){"use strict";i.r(e),i.d(e,"PublicModule",function(){return ot});var c=i("SVse"),n=i("s7LF"),s=i("iInd"),a=i("8Y7J"),o=i("OD9V"),r=i("zuHl"),l=i("PDjf"),b=i("Q2Ze"),u=i("e6WT"),d=i("vrAh"),m=i("Dxy4"),p=i("UhP/");function h(t,e){if(1&t&&(a.Tb(0,"mat-option",11),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.lc("value",t),a.Bb(1),a.Fc(" ",t.tx_company_name," ")}}let S=(()=>{class t{constructor(t,e,i){this.router=t,this.publicService=e,this.sharedService=i,this.companies=[]}ngOnInit(){}ngAfterViewInit(){document.getElementById("inputCompany").focus()}findCompany(t){t.value.length>1&&this.publicService.findCompany(t.value).subscribe(e=>{e.ok?this.companies=e.companies:(t.value="",this.sharedService.snack("No existen resultados.",2e3,null))},()=>{this.sharedService.snack("Error al obtener las empresas",2e3,null)})}goToCompany(t){localStorage.setItem("company",JSON.stringify(t)),this.publicService.company=t,this.router.navigate(["/public/",t.tx_company_string])}cleanInput(t){t.value=null}salir(){this.publicService.clearPublicSession(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(s.b),a.Nb(o.a),a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-search"]],decls:21,vars:2,consts:[[1,"saturno-card","animated","fadeIn","p-4"],[1,"mt-4"],[1,"w-100"],["id","inputCompany","matInput","","placeholder","Empresa S.A.",3,"matAutocomplete","keyup"],["inputCompany",""],[1,"input-icon",3,"click"],[1,"mdi","mdi-close"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"click"],[3,"value"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",0),a.Tb(1,"mat-card"),a.Tb(2,"mat-card-header"),a.Tb(3,"mat-card-title"),a.Dc(4,"Encontrar un Bar / Resto"),a.Sb(),a.Tb(5,"mat-card-subtitle"),a.Dc(6,"Puede buscar aqu\xed un bar o restorant para ver la dispoinibilidad y reservar una mesa. "),a.Sb(),a.Sb(),a.Tb(7,"mat-card-content"),a.Tb(8,"div",1),a.Tb(9,"mat-form-field",2),a.Tb(10,"mat-label"),a.Dc(11,"Ingrese la empresa aqu\xed"),a.Sb(),a.Tb(12,"input",3,4),a.ac("keyup",function(){a.uc(t);const i=a.tc(13);return e.findCompany(i)}),a.Sb(),a.Tb(14,"span",5),a.ac("click",function(){a.uc(t);const i=a.tc(13);return e.cleanInput(i)}),a.Ob(15,"i",6),a.Sb(),a.Sb(),a.Tb(16,"mat-autocomplete",7,8),a.ac("optionSelected",function(t){return e.goToCompany(t.option.value)}),a.Cc(18,h,2,2,"mat-option",9),a.Sb(),a.Sb(),a.Sb(),a.Tb(19,"button",10),a.ac("click",function(){return e.salir()}),a.Dc(20,"Volver al Inicio"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.tc(17);a.Bb(12),a.lc("matAutocomplete",t),a.Bb(6),a.lc("ngForOf",e.companies)}},directives:[l.a,l.e,l.h,l.g,l.d,b.c,b.f,u.b,d.c,d.a,c.j,m.a,p.l],styles:[".icon-search-company[_ngcontent-%COMP%]{width:36px!important;color:#a9a9a9;font-size:3em;letter-spacing:.2em;opacity:.5}"]}),t})();var f=i("AIE+"),v=i("AXWi"),g=i("mrSG"),k=i("XNiG"),T=i("l5mm"),_=i("PSD3"),y=i.n(_),C=i("wd/R"),w=i.n(C),I=i("Gyf/"),B=i("zHaW");function O(t,e){if(1&t&&(a.Tb(0,"span"),a.Dc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Fc(" ",t.averageToAtt," ")}}function D(t,e){if(1&t&&(a.Tb(0,"span"),a.Dc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Fc(" Pase a la mesa ",null==t.ticket||null==t.ticket.id_session?null:t.ticket.id_session.id_tables[0].nm_table," ")}}function x(t,e){if(1&t&&(a.Tb(0,"span"),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Fc(" ",t.nm_table," ")}}function P(t,e){if(1&t&&(a.Tb(0,"span"),a.Dc(1," Pase a las mesas "),a.Cc(2,x,2,1,"span",8),a.Sb()),2&t){const t=a.ec(2);a.Bb(2),a.lc("ngForOf",null==t.ticket||null==t.ticket.id_session?null:t.ticket.id_session.id_tables)}}const A=function(t){return{"screen-myticket-text-alert":t}};function E(t,e){if(1&t&&(a.Tb(0,"div"),a.Tb(1,"div",5),a.Dc(2," SU TURNO "),a.Sb(),a.Tb(3,"div",6),a.Dc(4),a.Sb(),a.Tb(5,"div",7),a.Cc(6,O,2,1,"span",2),a.Cc(7,D,2,1,"span",2),a.Cc(8,P,3,1,"span",2),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(3),a.lc("ngClass",a.pc(5,A,t.showAlert)),a.Bb(1),a.Fc(" ",null==t.ticket?null:t.ticket.id_position," "),a.Bb(2),a.lc("ngIf",!(null!=t.ticket&&t.ticket.id_session)),a.Bb(1),a.lc("ngIf",(null==t.ticket?null:t.ticket.id_session)&&1===(null==t.ticket||null==t.ticket.id_session||null==t.ticket.id_session.id_tables?null:t.ticket.id_session.id_tables.length)),a.Bb(1),a.lc("ngIf",(null==t.ticket?null:t.ticket.id_session)&&(null==t.ticket||null==t.ticket.id_session||null==t.ticket.id_session.id_tables?null:t.ticket.id_session.id_tables.length)>1)}}const N=function(t){return{"screen-icon-star-on":t}};function F(t,e){if(1&t){const t=a.Ub();a.Tb(0,"tr"),a.Tb(1,"td",14),a.Dc(2),a.Sb(),a.Tb(3,"td",15),a.Tb(4,"span",16),a.ac("click",function(){a.uc(t);const i=e.$implicit;return a.ec(3).setScore(i._id,1)}),a.Sb(),a.Sb(),a.Tb(5,"td",15),a.Tb(6,"span",16),a.ac("click",function(){a.uc(t);const i=e.$implicit;return a.ec(3).setScore(i._id,2)}),a.Sb(),a.Sb(),a.Tb(7,"td",15),a.Tb(8,"span",16),a.ac("click",function(){a.uc(t);const i=e.$implicit;return a.ec(3).setScore(i._id,3)}),a.Sb(),a.Sb(),a.Tb(9,"td",15),a.Tb(10,"span",16),a.ac("click",function(){a.uc(t);const i=e.$implicit;return a.ec(3).setScore(i._id,4)}),a.Sb(),a.Sb(),a.Tb(11,"td",15),a.Tb(12,"span",16),a.ac("click",function(){a.uc(t);const i=e.$implicit;return a.ec(3).setScore(i._id,5)}),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit,i=a.ec(3);a.Bb(2),a.Fc(" ",t.tx_item," "),a.Bb(2),a.lc("ngClass",a.pc(6,N,i.scores.get(t._id)>=1)),a.Bb(2),a.lc("ngClass",a.pc(8,N,i.scores.get(t._id)>=2)),a.Bb(2),a.lc("ngClass",a.pc(10,N,i.scores.get(t._id)>=3)),a.Bb(2),a.lc("ngClass",a.pc(12,N,i.scores.get(t._id)>=4)),a.Bb(2),a.lc("ngClass",a.pc(14,N,i.scores.get(t._id)>=5))}}function M(t,e){if(1&t&&(a.Tb(0,"div"),a.Tb(1,"div",11),a.Dc(2," \xbfPodr\xeda dejarnos su opini\xf3n? "),a.Sb(),a.Tb(3,"div",12),a.Tb(4,"table",13),a.Cc(5,F,13,16,"tr",8),a.Sb(),a.Sb(),a.Sb()),2&t){const t=a.ec(2);a.Bb(5),a.lc("ngForOf",t.scoreItems)}}function z(t,e){if(1&t&&(a.Tb(0,"div",9),a.Tb(1,"div",10),a.Dc(2,"\xa1Gracias por su visita!"),a.Sb(),a.Cc(3,M,6,1,"div",2),a.Sb()),2&t){const t=a.ec();a.Bb(3),a.lc("ngIf",t.scoreItems.length>0)}}function j(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div"),a.Tb(1,"button",17),a.ac("click",function(){return a.uc(t),a.ec().callWaiter("waiter")}),a.Ob(2,"div",18),a.Dc(3," Llamar al mozo "),a.Sb(),a.Tb(4,"button",17),a.ac("click",function(){return a.uc(t),a.ec().callWaiter("account")}),a.Ob(5,"div",19),a.Dc(6," Pedir la Cuenta "),a.Sb(),a.Tb(7,"button",20),a.ac("click",function(){return a.uc(t),a.ec().endTicket()}),a.Ob(8,"div",21),a.Dc(9," Cancelar Turno "),a.Sb(),a.Sb()}if(2&t){const t=a.ec();a.Bb(1),a.lc("disabled",(null==t.ticket?null:t.ticket.tx_call)||!(null!=t.ticket&&t.ticket.id_session)),a.Bb(3),a.lc("disabled",(null==t.ticket?null:t.ticket.tx_call)||!(null!=t.ticket&&t.ticket.id_session)),a.Bb(3),a.lc("disabled",!t.ticket)}}function q(t,e){1&t&&(a.Tb(0,"tr"),a.Tb(1,"td"),a.Dc(2,"--"),a.Sb(),a.Tb(3,"td"),a.Dc(4,"--"),a.Sb(),a.Tb(5,"td"),a.Dc(6,"--"),a.Sb(),a.Sb())}function U(t,e){1&t&&(a.Tb(0,"span",30),a.Ob(1,"span",31),a.Sb())}function $(t,e){1&t&&(a.Tb(0,"span",32),a.Ob(1,"span",33),a.Sb())}function L(t,e){1&t&&(a.Tb(0,"span",34),a.Ob(1,"span",35),a.Sb())}function R(t,e){if(1&t&&(a.Tb(0,"tr"),a.Tb(1,"td",25),a.Dc(2),a.Sb(),a.Tb(3,"td",25),a.Dc(4),a.Sb(),a.Tb(5,"td",26),a.Cc(6,U,2,0,"span",27),a.Cc(7,$,2,0,"span",28),a.Cc(8,L,2,0,"span",29),a.Sb(),a.Sb()),2&t){const t=e.$implicit;a.Bb(2),a.Fc(" ",t.id_position,""),a.Bb(2),a.Fc(" ",t.id_session.id_tables.nm_table,""),a.Bb(2),a.lc("ngIf",!t.tm_end),a.Bb(1),a.lc("ngIf",t.id_child&&t.tm_end),a.Bb(1),a.lc("ngIf",!t.id_child&&t.tm_end)}}function H(t,e){if(1&t&&(a.Tb(0,"div",22),a.Tb(1,"table",23),a.Tb(2,"tr"),a.Tb(3,"td",24),a.Dc(4," TURNO "),a.Sb(),a.Tb(5,"td",24),a.Dc(6," MESA"),a.Sb(),a.Tb(7,"td",24),a.Dc(8," ESTADO "),a.Sb(),a.Sb(),a.Cc(9,q,7,0,"tr",2),a.Cc(10,R,9,5,"tr",8),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(9),a.lc("ngIf",0===t.ticketsTail.length),a.Bb(1),a.lc("ngForOf",t.ticketsTail)}}let G=(()=>{class t{constructor(t,e,i,c,n){this.wsService=t,this.publicService=e,this.sharedService=i,this.snack=c,this.router=n,this.showAlert=!1,this.coming=!1,this.ticketTmEnd=null,this.tickets=[],this.ticketsTail=[],this.scoreItems=[],this.scores=new Map,this.subjectUpdateTickets$=new k.a}ngOnInit(){if(!this.publicService.ticket)return this.router.navigate(["/public/companypage"]),void this.sharedService.snack("Debe obtener un turno primero.",5e3);this.coming=!1,document.getElementsByTagName("body")[0].classList.remove("container"),this.wsService.updateTicketsClients().subscribe(this.subjectUpdateTickets$),this.subjectUpdateTickets$.subscribe(()=>{this.getTickets()}),this.publicService.company&&this.publicService.ticket?(this.ticket=this.publicService.ticket,this.publicService.getTickets(this.publicService.company._id)):(this.router.navigate(["/public"]),this.snack.open("Por favor ingrese una empresa primero!",null,{duration:5e3})),this.getTickets()}getTickets(){return Object(g.a)(this,void 0,void 0,function*(){this.ticket&&this.publicService.getTickets(this.ticket.id_company).subscribe(t=>{var e;if(t.ok){this.tickets=t.tickets,this.ticketsTail=t.tickets.filter(t=>null!==t.tm_provided).sort((t,e)=>e.tm_provided-t.tm_provided).slice(0,5),this.pickMyTicket(),(null===(e=this.ticket)||void 0===e?void 0:e.id_session)&&!this.timer?this.timer=Object(T.a)(500).subscribe(t=>{this.showAlert=!this.showAlert}):(this.timer&&this.timer.unsubscribe(),this.showAlert=!1),this.ticket&&null===this.ticket.tm_provided&&this.calculateTimeToAtt();const i=new Audio;i.src="../../assets/bell.wav",i.load(),i.play()}})})}pickMyTicket(){const t=this.tickets.filter(t=>t._id===this.ticket._id)[0];t&&(null!==t.tm_end?this.getScoreItems().then(()=>{this.ticketTmEnd=t.tm_end,this.publicService.clearPublicSession()}):(this.ticket=t,this.publicService.ticket=t,localStorage.setItem("ticket",JSON.stringify(this.ticket))))}calculateTimeToAtt(){let t=this.tickets.filter(t=>null!==t.tm_end),e=this.tickets.filter(t=>null===t.tm_end),i=t.sort((t,e)=>e.tm_end-t.tm_end).slice(0,5).filter(t=>null!==t.tm_att);if(0===i.length)return void(this.averageToAtt="Sin datos todav\xeda");t.sort((t,e)=>e.id_session>t.id_session?-1:1).slice(0,5);let c=0;for(let l of i)c+=l.tm_end-l.tm_att;let n=0,s=null;for(let l of i){let t=0,e=0;l.id_session===s?(t=l.tm_end,n+=l.tm_att-l.tm_att,e=0,t=0):e=l.tm_att,s=l._id,0===n&&(e=l.tm_att)}let a=0;for(let l of e){if(l._id===this.ticket._id)break;a++}this.ticketsAhead=a;let o=c/i.length,r=n/i.length;this.averageToAtt="Su mesa estar\xe1 lista en "+w.a.duration((o+r)*this.ticketsAhead+(o+r)/4).humanize()}toggle(t){t.toggle()}enCamino(){this.coming=!0,this.wsService.emit("cliente-en-camino",this.publicService.ticket.id_socket_waiter)}callWaiter(t){this.publicService.callWaiter(this.ticket._id,t).subscribe(t=>{t.ok&&(this.ticket.tx_call=t.ticket.tx_call,this.snack.open(t.msg,"ACEPTAR",{duration:2e3}))})}endTicket(){return new Promise(t=>{this.sharedService.snack("Esta acci\xf3n finalizara su turno",5e3,"TERMINAR").then(e=>{e&&this.publicService.endTicket(this.ticket._id).subscribe(e=>{e.ok&&(t(),this.snack.open(e.msg,"ACEPTAR",{duration:2e3}),this.publicService.clearPublicSession(),this.router.navigate(["/home"]))})})})}getScoreItems(){return new Promise(t=>{this.publicService.getScoreItems(this.ticket.id_section._id).subscribe(e=>{this.scoreItems=e.scoreitems,t()})})}setScore(t,e){if(this.scores.set(t,e),this.scores.size===this.scoreItems.length){let t=this.ticket._id,e=[];this.scores.forEach(function(i,c,n){e.push({id_ticket:t,id_scoreitem:c,cd_score:i})}),this.publicService.sendScores(e).subscribe(t=>{t.ok&&delete this.ticket}),y.a.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",y.a.stopTimer),t.addEventListener("mouseleave",y.a.resumeTimer)}}).fire({icon:"success",title:"\xa1Gracias!"}).then(t=>{t.isDismissed&&this.publicService.clearPublicSessionComplete()})}}ngOnDestroy(){this.subjectUpdateTickets$.complete(),this.timer&&this.timer.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(I.a),a.Nb(o.a),a.Nb(r.a),a.Nb(B.a),a.Nb(s.b))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-myticket"]],decls:13,vars:4,consts:[[1,"saturno-card","m-0"],["mat-card-avatar","",1,"tech-angular"],[4,"ngIf"],["class","p-3 my-4",4,"ngIf"],["class","p-2 my-4",4,"ngIf"],[1,"screen-myticket-text-header"],[1,"screen-myticket-text",3,"ngClass"],[1,"screen-myticket-text-footer",2,"line-height","normal"],[4,"ngFor","ngForOf"],[1,"p-3","my-4"],[1,"xl"],[1,"md","my-3","text-warning"],[1,"text-white","mt-4","table-responsive-sm"],[1,"table","table-sm","text-white","m-0"],[1,"lg","py-2"],[1,"p-0","py-2"],[1,"mdi","mdi-star","screen-icon-star",3,"ngClass","click"],["mat-raised-button","","color","primary",1,"m-2",3,"disabled","click"],[1,"mdi","mdi-silverware-fork-knife","xl"],[1,"mdi","mdi-file-document-edit-outline","xl"],["mat-raised-button","","color","warn",1,"m-2",3,"disabled","click"],[1,"mdi","mdi-power","xl"],[1,"p-2","my-4"],[1,"w-100","table-sm","text-center"],[1,"screen-history-title"],[1,"screen-history-text",2,"text-align","center"],[2,"padding","0","vertical-align","middle"],["style","color: blueviolet",4,"ngIf"],["style","color: red",4,"ngIf"],["style","color: green",4,"ngIf"],[2,"color","blueviolet"],[1,"mdi","mdi-contactless-payment-circle-outline","screen-history-icon"],[2,"color","red"],[1,"mdi","mdi-arrow-left-circle-outline","screen-history-icon"],[2,"color","green"],[1,"mdi","mdi-check-circle-outline","screen-history-icon"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"mat-card"),a.Tb(2,"mat-card-header"),a.Ob(3,"div",1),a.Tb(4,"mat-card-title"),a.Dc(5,"Turno"),a.Sb(),a.Tb(6,"mat-card-subtitle"),a.Dc(7,"Espera tu turno, te avisamos cuando tue mesa est\xe9 lista."),a.Sb(),a.Sb(),a.Tb(8,"mat-card-content"),a.Cc(9,E,9,7,"div",2),a.Cc(10,z,4,1,"div",3),a.Cc(11,j,10,3,"div",2),a.Cc(12,H,11,2,"div",4),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(9),a.lc("ngIf",null===e.ticketTmEnd),a.Bb(1),a.lc("ngIf",null!==e.ticketTmEnd),a.Bb(1),a.lc("ngIf",null===e.ticketTmEnd),a.Bb(1),a.lc("ngIf",null===e.ticketTmEnd))},directives:[l.a,l.e,l.c,l.h,l.g,l.d,c.k,c.i,c.j,m.a],styles:[".screen-icon-star[_ngcontent-%COMP%]{cursor:pointer;color:#5e5e5e;font-size:x-large}.screen-icon-star-on[_ngcontent-%COMP%]{color:orange}.screen-myticket-text-header[_ngcontent-%COMP%]{font-size:1.2em}.screen-myticket-text[_ngcontent-%COMP%]{font-size:5em;color:red;line-height:1em}.screen-myticket-text-alert[_ngcontent-%COMP%]{opacity:.1}.screen-myticket-text-footer[_ngcontent-%COMP%]{font-size:1em}.screen-history-title[_ngcontent-%COMP%]{font-size:calc(.8em + .8vw)}.screen-history-text[_ngcontent-%COMP%]{font-size:calc(1em + .8vw)}.screen-history-icon[_ngcontent-%COMP%]{font-size:calc(1.2em + .8vw)}"]}),t})();var V=i("M9ds");let W=(()=>{class t{constructor(t,e){this.publicService=t,this.router=e}ngOnInit(){}salir(){this.publicService.clearPublicSession(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(o.a),a.Nb(s.b))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-home"]],decls:15,vars:2,consts:[[1,"saturno-card","animated","fadeIn"],["src","./assets/uploads/sandangabar/pageimg.jpg",1,"img-fluid","rounded"],[1,"my-2",2,"text-align","center","display","block"],[1,"public-home-title"],[1,"public-home-subtitle"],[1,"public-home-content"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"mat-card"),a.Ob(2,"img",1),a.Tb(3,"mat-card-header",2),a.Tb(4,"div",3),a.Dc(5),a.Sb(),a.Tb(6,"div",4),a.Dc(7),a.Sb(),a.Sb(),a.Tb(8,"mat-card-content"),a.Tb(9,"div",5),a.Tb(10,"p"),a.Dc(11," Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam et a quod voluptatibus nemo iusto neque animi vitae doloribus provident, magni, officia eveniet laborum quia, necessitatibus adipisci! Libero, officiis quos. Ullam corporis sint minima dolorum dignissimos, eos dolor praesentium enim voluptatibus impedit dicta suscipit exercitationem libero assumenda nulla! Excepturi pariatur id voluptatum assumenda minima, veniam sed adipisci quis dolorem repudiandae dolor ipsum nobis, nesciunt consectetur inventore et consequatur eaque dolores exercitationem explicabo, eos optio totam voluptates non? Eius praesentium facere porro eligendi. Iusto repellat, provident sint ab commodi vel alias tempore mollitia aspernatur, illo omnis voluptate autem distinctio voluptatibus inventore. "),a.Sb(),a.Sb(),a.Sb(),a.Tb(12,"mat-card-actions"),a.Tb(13,"button",6),a.ac("click",function(){return e.salir()}),a.Dc(14," SALIR "),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(5),a.Ec(e.publicService.company.tx_company_name),a.Bb(2),a.Ec(e.publicService.company.tx_company_slogan))},directives:[l.a,l.e,l.d,l.b,m.a],styles:['.public-home-title[_ngcontent-%COMP%]{font-size:xx-large;color:#ff8b00}.public-home-subtitle[_ngcontent-%COMP%]{font-size:small}.public-home-content[_ngcontent-%COMP%]{font-family:"system-ui";font-size:small;font-weight:200;padding:1em}']}),t})(),J=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-menu"]],decls:7,vars:0,consts:[[1,"saturno-card","animated","fadeIn"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"mat-card"),a.Tb(2,"mat-card-header"),a.Tb(3,"mat-card-title"),a.Dc(4,"Trabajando en el formulario..."),a.Sb(),a.Tb(5,"mat-card-subtitle"),a.Dc(6,"Adem\xe1s de pedir una mesa tambi\xe9n vas a poder ordenar tu men\xfa"),a.Sb(),a.Sb(),a.Sb(),a.Sb())},directives:[l.a,l.e,l.h,l.g],styles:[""]}),t})();var X=i("ZTz/"),Z=i("0CBe");function K(t,e){1&t&&(a.Tb(0,"h5"),a.Tb(1,"span",2),a.Dc(2," Cargando... "),a.Sb(),a.Sb())}function Y(t,e){if(1&t&&(a.Tb(0,"mat-option",14),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.lc("value",t._id),a.Bb(1),a.Fc(" ",t.tx_section," ")}}function Q(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div"),a.Tb(1,"mat-card"),a.Tb(2,"mat-card-header"),a.Tb(3,"div",3),a.Ob(4,"img",4),a.fc(5,"imagenPipe"),a.Sb(),a.Tb(6,"mat-card-title"),a.Dc(7),a.Sb(),a.Tb(8,"mat-card-subtitle"),a.Dc(9),a.Sb(),a.Sb(),a.Tb(10,"mat-card-content"),a.Tb(11,"form",5,6),a.Tb(13,"mat-form-field",7),a.Tb(14,"mat-label"),a.Dc(15,"Cantidad de Personas"),a.Sb(),a.Ob(16,"input",8),a.Sb(),a.Tb(17,"mat-form-field",7),a.Tb(18,"mat-label"),a.Dc(19,"Sector"),a.Sb(),a.Tb(20,"mat-select",9),a.Cc(21,Y,2,2,"mat-option",10),a.Sb(),a.Sb(),a.Tb(22,"div",11),a.Tb(23,"button",12),a.ac("click",function(){return a.uc(t),a.ec(2).salir()}),a.Dc(24," Salir "),a.Sb(),a.Tb(25,"button",13),a.ac("click",function(){return a.uc(t),a.ec(2).createTicket()}),a.Dc(26," Solicitar "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.ec(2);a.Bb(4),a.lc("src",a.ic(5,6,t.publicService.company.tx_company_logo,"logo",t.publicService.company._id),a.vc),a.Bb(3),a.Ec(t.publicService.company.tx_company_name),a.Bb(2),a.Gc("",t.publicService.company.tx_address_street," ",t.publicService.company.tx_address_number,""),a.Bb(2),a.lc("formGroup",t.ticketForm),a.Bb(10),a.lc("ngForOf",t.sections)}}function tt(t,e){if(1&t&&(a.Tb(0,"div"),a.Cc(1,K,3,0,"h5",1),a.Cc(2,Q,27,10,"div",1),a.Sb()),2&t){const t=a.ec();a.Bb(1),a.lc("ngIf",t.loading),a.Bb(1),a.lc("ngIf",!t.loading)}}let et=(()=>{class t{constructor(t,e,i,c){this.wsService=t,this.publicService=e,this.sharedService=i,this.router=c,this.loading=!1,this.sections=[]}ngOnInit(){if(this.ticketForm=new n.i({nmPersons:new n.f("",[n.w.required]),idSection:new n.f("",[n.w.required])}),this.publicService.ticket)this.sharedService.snack("Ya ten\xe9s un turno!",2e3),this.router.navigate(["/public/myticket"]);else if(this.publicService.company){let t=this.publicService.company._id;this.wsService.emit("enterCompany",t),this.loading=!0,this.publicService.readSections(t).subscribe(t=>{this.loading=!1,this.sections=t.sections})}else this.sharedService.snack("Por favor eleg\xed un bar primero.",2e3),this.router.navigate(["/public"])}createTicket(){if(this.ticketForm.invalid)return void this.sharedService.snack("Ingrese sector y cantidad de personas",3e3);if(localStorage.getItem("user"))return void y.a.fire({icon:"error",title:"Est\xe1s haciendo pruebas?",text:"Est\xe1s en una p\xe1gina de acceso al p\xfablico pero ten\xe9s una sesi\xf3n de usuario activa. Para obtener un turno ten\xe9s cerrar la sesi\xf3n de usuario o abrir una pesta\xf1a en modo inc\xf3gnito."});this.loading=!0;let t=this.wsService.idSocket,e=this.ticketForm.value.nmPersons,i=this.ticketForm.value.idSection;this.loading=!0,this.publicService.createTicket(t,e,i).subscribe(t=>{t.ok&&(this.loading=!1,localStorage.setItem("ticket",JSON.stringify(t.ticket)),this.publicService.ticket=t.ticket,this.router.navigate(["/public/myticket"]))})}salir(){this.publicService.clearPublicSession(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(I.a),a.Nb(o.a),a.Nb(r.a),a.Nb(s.b))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-table"]],decls:2,vars:1,consts:[[1,"saturno-card","m-3","animated","fadeIn"],[4,"ngIf"],["id","lblNuevoTicket"],["mat-card-avatar",""],[1,"img-fluid",3,"src"],["autocomplete","off","ngNativeValidate","",3,"formGroup"],["formDirective","ngForm"],[1,"w-100"],["matInput","","placeholder","Cantidad de Personas","formControlName","nmPersons","name","nmPersons","type","number","min","1","required",""],["formControlName","idSection","name","idSection","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","mx-0"],["color","warn","mat-raised-button","",1,"col","mr-1","my-2",3,"click"],["color","primary","mat-raised-button","",1,"col","ml-1","my-2",3,"click"],[3,"value"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Cc(1,tt,3,2,"div",1),a.Sb()),2&t&&(a.Bb(1),a.lc("ngIf",e.publicService.company))},directives:[c.k,l.a,l.e,l.c,l.h,l.g,l.d,n.q,n.j,b.c,b.f,u.b,n.d,n.t,n.p,n.h,n.v,X.a,c.j,m.a,p.l],pipes:[Z.a],styles:[""]}),t})();const it=[{path:"companypage",component:(()=>{class t{constructor(t){this.publicService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(o.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-company-page"]],decls:8,vars:1,consts:[[1,"container-fluid","h-100"],["mat-align-tabs","center","dynamicHeight",""],[3,"label"],["label","Men\xfa"],["label","Reservar Mesa"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"mat-tab-group",1),a.Tb(2,"mat-tab",2),a.Ob(3,"app-home"),a.Sb(),a.Tb(4,"mat-tab",3),a.Ob(5,"app-menu"),a.Sb(),a.Tb(6,"mat-tab",4),a.Ob(7,"app-table"),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(2),a.mc("label",e.publicService.company.tx_company_name))},directives:[V.b,V.a,W,J,et],styles:[""]}),t})()},{path:"myticket",component:G},{path:"",component:S},{path:":company",component:v.a},{path:"**",component:f.a}];let ct=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(it)],s.e]}),t})();var nt=i("1+r1"),st=i("j1ZV"),at=i("iTUp");let ot=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[c.b,n.u,n.k,nt.a,st.a,ct,at.a]]}),t})()}}]);