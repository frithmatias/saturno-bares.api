(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{T8Xv:function(t,e,i){"use strict";i.r(e),i.d(e,"PublicModule",function(){return ot});var c=i("SVse"),n=i("s7LF"),s=i("iInd"),o=i("8Y7J"),r=i("OD9V"),a=i("zuHl"),l=i("PDjf"),b=i("Q2Ze"),u=i("e6WT"),d=i("vrAh"),m=i("UhP/");function p(t,e){if(1&t&&(o.Tb(0,"mat-option",10),o.Cc(1),o.Sb()),2&t){const t=e.$implicit;o.kc("value",t),o.Bb(1),o.Ec(" ",t.tx_company_name," ")}}let h=(()=>{class t{constructor(t,e,i){this.router=t,this.publicService=e,this.sharedService=i,this.companies=[]}ngOnInit(){}ngAfterViewInit(){document.getElementById("inputCompany").focus()}findCompany(t){t.value.length>1&&this.publicService.findCompany(t.value).subscribe(e=>{e.ok?this.companies=e.companies:(t.value="",this.sharedService.snack("No existen resultados.",2e3,null))},()=>{this.sharedService.snack("Error al obtener las empresas",2e3,null)})}goToCompany(t){localStorage.setItem("company",JSON.stringify(t)),this.publicService.company=t,this.router.navigate(["/public/",t.tx_company_string])}cleanInput(t){t.value=null}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(s.b),o.Nb(r.a),o.Nb(a.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-search"]],decls:19,vars:2,consts:[[1,"saturno-card","animated","fadeIn","p-4"],[1,"mt-4"],["color","warn","logincss","",1,"w-100"],["id","inputCompany","matInput","","placeholder","Empresa S.A.",3,"matAutocomplete","keyup"],["inputCompany",""],[1,"input-icon",3,"click"],[1,"mdi","mdi-close"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",0),o.Tb(1,"mat-card"),o.Tb(2,"mat-card-header"),o.Tb(3,"mat-card-title"),o.Cc(4,"Encontrar un Bar / Resto"),o.Sb(),o.Tb(5,"mat-card-subtitle"),o.Cc(6,"Puede buscar aqu\xed un bar o restorant para ver la dispoinibilidad y reservar una mesa. "),o.Sb(),o.Sb(),o.Tb(7,"mat-card-content"),o.Tb(8,"div",1),o.Tb(9,"mat-form-field",2),o.Tb(10,"mat-label"),o.Cc(11,"Ingrese la empresa aqu\xed"),o.Sb(),o.Tb(12,"input",3,4),o.ac("keyup",function(){o.tc(t);const i=o.sc(13);return e.findCompany(i)}),o.Sb(),o.Tb(14,"span",5),o.ac("click",function(){o.tc(t);const i=o.sc(13);return e.cleanInput(i)}),o.Ob(15,"i",6),o.Sb(),o.Sb(),o.Tb(16,"mat-autocomplete",7,8),o.ac("optionSelected",function(t){return e.goToCompany(t.option.value)}),o.Bc(18,p,2,2,"mat-option",9),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.sc(17);o.Bb(12),o.kc("matAutocomplete",t),o.Bb(6),o.kc("ngForOf",e.companies)}},directives:[l.a,l.c,l.f,l.e,l.b,b.c,b.f,u.b,d.c,d.a,c.i,m.l],styles:[".icon-search-company[_ngcontent-%COMP%]{width:36px!important;color:#a9a9a9;font-size:3em;letter-spacing:.2em;opacity:.5}"]}),t})();var k=i("AIE+"),f=i("AXWi"),S=i("mrSG"),g=i("XNiG"),v=i("l5mm"),T=i("PSD3"),_=i.n(T),y=i("wd/R"),C=i.n(y),B=i("Gyf/"),w=i("zHaW");function I(t,e){if(1&t&&(o.Tb(0,"span"),o.Cc(1),o.Sb()),2&t){const t=o.ec(2);o.Bb(1),o.Ec(" ",t.averageToAtt," ")}}function x(t,e){if(1&t&&(o.Tb(0,"span"),o.Cc(1),o.Sb()),2&t){const t=o.ec(2);o.Bb(1),o.Ec(" Pase a la mesa ",null==t.ticket||null==t.ticket.id_session?null:t.ticket.id_session.id_tables[0].nm_table," ")}}function O(t,e){if(1&t&&(o.Tb(0,"span"),o.Cc(1),o.Sb()),2&t){const t=e.$implicit;o.Bb(1),o.Ec(" ",t.nm_table," ")}}function P(t,e){if(1&t&&(o.Tb(0,"span"),o.Cc(1," Pase a las mesas "),o.Bc(2,O,2,1,"span",10),o.Sb()),2&t){const t=o.ec(2);o.Bb(2),o.kc("ngForOf",null==t.ticket||null==t.ticket.id_session?null:t.ticket.id_session.id_tables)}}const E=function(t){return{"screen-myticket-text-alert":t}};function A(t,e){if(1&t&&(o.Tb(0,"div",5),o.Tb(1,"div",6),o.Cc(2," SU TURNO "),o.Sb(),o.Tb(3,"div",7),o.Cc(4),o.Sb(),o.Tb(5,"div",8),o.Bc(6,I,2,1,"span",9),o.Bc(7,x,2,1,"span",9),o.Bc(8,P,3,1,"span",9),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(3),o.kc("ngClass",o.nc(5,E,t.showAlert)),o.Bb(1),o.Ec(" ",null==t.ticket?null:t.ticket.id_position," "),o.Bb(2),o.kc("ngIf",!(null!=t.ticket&&t.ticket.id_session)),o.Bb(1),o.kc("ngIf",(null==t.ticket?null:t.ticket.id_session)&&1===(null==t.ticket||null==t.ticket.id_session||null==t.ticket.id_session.id_tables?null:t.ticket.id_session.id_tables.length)),o.Bb(1),o.kc("ngIf",(null==t.ticket?null:t.ticket.id_session)&&(null==t.ticket||null==t.ticket.id_session||null==t.ticket.id_session.id_tables?null:t.ticket.id_session.id_tables.length)>1)}}const N=function(t){return{"screen-icon-star-on":t}};function M(t,e){if(1&t){const t=o.Ub();o.Tb(0,"tr"),o.Tb(1,"td",16),o.Cc(2),o.Sb(),o.Tb(3,"td",17),o.Tb(4,"span",18),o.ac("click",function(){o.tc(t);const i=e.$implicit;return o.ec(3).setScore(i._id,1)}),o.Sb(),o.Sb(),o.Tb(5,"td",17),o.Tb(6,"span",18),o.ac("click",function(){o.tc(t);const i=e.$implicit;return o.ec(3).setScore(i._id,2)}),o.Sb(),o.Sb(),o.Tb(7,"td",17),o.Tb(8,"span",18),o.ac("click",function(){o.tc(t);const i=e.$implicit;return o.ec(3).setScore(i._id,3)}),o.Sb(),o.Sb(),o.Tb(9,"td",17),o.Tb(10,"span",18),o.ac("click",function(){o.tc(t);const i=e.$implicit;return o.ec(3).setScore(i._id,4)}),o.Sb(),o.Sb(),o.Tb(11,"td",17),o.Tb(12,"span",18),o.ac("click",function(){o.tc(t);const i=e.$implicit;return o.ec(3).setScore(i._id,5)}),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,i=o.ec(3);o.Bb(2),o.Ec(" ",t.tx_item," "),o.Bb(2),o.kc("ngClass",o.nc(6,N,i.scores.get(t._id)>=1)),o.Bb(2),o.kc("ngClass",o.nc(8,N,i.scores.get(t._id)>=2)),o.Bb(2),o.kc("ngClass",o.nc(10,N,i.scores.get(t._id)>=3)),o.Bb(2),o.kc("ngClass",o.nc(12,N,i.scores.get(t._id)>=4)),o.Bb(2),o.kc("ngClass",o.nc(14,N,i.scores.get(t._id)>=5))}}function F(t,e){if(1&t&&(o.Tb(0,"div"),o.Tb(1,"div",13),o.Cc(2," \xbfPodr\xeda dejarnos su opini\xf3n? "),o.Sb(),o.Tb(3,"div",14),o.Tb(4,"table",15),o.Bc(5,M,13,16,"tr",10),o.Sb(),o.Sb(),o.Sb()),2&t){const t=o.ec(2);o.Bb(5),o.kc("ngForOf",t.scoreItems)}}function z(t,e){if(1&t&&(o.Tb(0,"div",11),o.Tb(1,"div",12),o.Cc(2,"\xa1Gracias por su visita!"),o.Sb(),o.Bc(3,F,6,1,"div",9),o.Sb()),2&t){const t=o.ec();o.Bb(3),o.kc("ngIf",t.scoreItems.length>0)}}const j=function(t){return{"button-disabled":t}};function q(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",19),o.Tb(1,"div",20),o.Tb(2,"button",21),o.ac("click",function(){return o.tc(t),o.ec().callWaiter("waiter")}),o.Tb(3,"table",22),o.Tb(4,"tr"),o.Tb(5,"td",23),o.Ob(6,"div",24),o.Sb(),o.Tb(7,"td"),o.Cc(8,"Llamar al mozo"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(9,"div",20),o.Tb(10,"button",25),o.ac("click",function(){return o.tc(t),o.ec().callWaiter("account")}),o.Tb(11,"table",22),o.Tb(12,"tr"),o.Tb(13,"td",23),o.Ob(14,"div",26),o.Sb(),o.Tb(15,"td"),o.Cc(16," Pedir la Cuenta"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(17,"div",20),o.Tb(18,"button",27),o.ac("click",function(){return o.tc(t),o.ec().endTicket()}),o.Tb(19,"table",22),o.Tb(20,"tr"),o.Tb(21,"td",23),o.Ob(22,"div",28),o.Sb(),o.Tb(23,"td"),o.Cc(24," Cancelar Turno"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Bb(2),o.kc("disabled",(null==t.ticket?null:t.ticket.tx_call)||!(null!=t.ticket&&t.ticket.id_session))("ngClass",o.nc(6,j,(null==t.ticket?null:t.ticket.tx_call)||!(null!=t.ticket&&t.ticket.id_session))),o.Bb(8),o.kc("disabled",(null==t.ticket?null:t.ticket.tx_call)||!(null!=t.ticket&&t.ticket.id_session))("ngClass",o.nc(8,j,(null==t.ticket?null:t.ticket.tx_call)||!(null!=t.ticket&&t.ticket.id_session))),o.Bb(8),o.kc("disabled",!t.ticket)("ngClass",o.nc(10,j,!t.ticket))}}function U(t,e){1&t&&(o.Tb(0,"tr"),o.Tb(1,"td"),o.Cc(2,"--"),o.Sb(),o.Tb(3,"td"),o.Cc(4,"--"),o.Sb(),o.Tb(5,"td"),o.Cc(6,"--"),o.Sb(),o.Sb())}function $(t,e){1&t&&(o.Tb(0,"span",37),o.Ob(1,"span",38),o.Sb())}function H(t,e){1&t&&(o.Tb(0,"span",39),o.Ob(1,"span",40),o.Sb())}function L(t,e){1&t&&(o.Tb(0,"span",41),o.Ob(1,"span",42),o.Sb())}function R(t,e){if(1&t&&(o.Tb(0,"tr"),o.Tb(1,"td",32),o.Cc(2),o.Sb(),o.Tb(3,"td",32),o.Cc(4),o.Sb(),o.Tb(5,"td",33),o.Bc(6,$,2,0,"span",34),o.Bc(7,H,2,0,"span",35),o.Bc(8,L,2,0,"span",36),o.Sb(),o.Sb()),2&t){const t=e.$implicit;o.Bb(2),o.Ec(" ",t.id_position,""),o.Bb(2),o.Ec(" ",t.id_session.id_tables.nm_table,""),o.Bb(2),o.kc("ngIf",!t.tm_end),o.Bb(1),o.kc("ngIf",t.id_child&&t.tm_end),o.Bb(1),o.kc("ngIf",!t.id_child&&t.tm_end)}}function D(t,e){if(1&t&&(o.Tb(0,"div",29),o.Tb(1,"table",30),o.Tb(2,"tr"),o.Tb(3,"td",31),o.Cc(4," TURNO "),o.Sb(),o.Tb(5,"td",31),o.Cc(6," MESA"),o.Sb(),o.Tb(7,"td",31),o.Cc(8," ESTADO "),o.Sb(),o.Sb(),o.Bc(9,U,7,0,"tr",9),o.Bc(10,R,9,5,"tr",10),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(9),o.kc("ngIf",0===t.ticketsTail.length),o.Bb(1),o.kc("ngForOf",t.ticketsTail)}}let G=(()=>{class t{constructor(t,e,i,c,n){this.wsService=t,this.publicService=e,this.sharedService=i,this.snack=c,this.router=n,this.showAlert=!1,this.coming=!1,this.ticketTmEnd=null,this.tickets=[],this.ticketsTail=[],this.scoreItems=[],this.scores=new Map,this.subjectUpdateTickets$=new g.a}ngOnInit(){if(!this.publicService.ticket)return this.router.navigate(["/public/tickets"]),void this.sharedService.snack("Debe obtener un turno primero.",5e3);this.coming=!1,document.getElementsByTagName("body")[0].classList.remove("container"),this.wsService.updateTicketsClients().subscribe(this.subjectUpdateTickets$),this.subjectUpdateTickets$.subscribe(()=>{this.getTickets()}),this.publicService.company&&this.publicService.ticket?(this.ticket=this.publicService.ticket,this.publicService.getTickets(this.publicService.company._id)):(this.router.navigate(["/public"]),this.snack.open("Por favor ingrese una empresa primero!",null,{duration:5e3})),this.getTickets()}getTickets(){return Object(S.a)(this,void 0,void 0,function*(){this.ticket&&this.publicService.getTickets(this.ticket.id_company).subscribe(t=>{var e;if(t.ok){this.tickets=t.tickets,this.ticketsTail=t.tickets.filter(t=>null!==t.tm_provided).sort((t,e)=>e.tm_provided-t.tm_provided).slice(0,5),this.pickMyTicket(),(null===(e=this.ticket)||void 0===e?void 0:e.id_session)&&!this.timer?this.timer=Object(v.a)(500).subscribe(t=>{this.showAlert=!this.showAlert}):(this.timer&&this.timer.unsubscribe(),this.showAlert=!1),this.ticket&&null===this.ticket.tm_provided&&this.calculateTimeToAtt();const i=new Audio;i.src="../../assets/bell.wav",i.load(),i.play()}})})}pickMyTicket(){const t=this.tickets.filter(t=>t._id===this.ticket._id)[0];t&&(null!==t.tm_end?this.getScoreItems().then(()=>{this.ticketTmEnd=t.tm_end,this.publicService.clearPublicSession()}):(this.ticket=t,this.publicService.ticket=t,localStorage.setItem("ticket",JSON.stringify(this.ticket))))}calculateTimeToAtt(){let t=this.tickets.filter(t=>null!==t.tm_end),e=this.tickets.filter(t=>null===t.tm_end),i=t.sort((t,e)=>e.tm_end-t.tm_end).slice(0,5).filter(t=>null!==t.tm_att);if(0===i.length)return void(this.averageToAtt="Sin datos todav\xeda");t.sort((t,e)=>e.id_session>t.id_session?-1:1).slice(0,5);let c=0;for(let l of i)c+=l.tm_end-l.tm_att;let n=0,s=null;for(let l of i){let t=0,e=0;l.id_session===s?(t=l.tm_end,n+=l.tm_att-l.tm_att,e=0,t=0):e=l.tm_att,s=l._id,0===n&&(e=l.tm_att)}let o=0;for(let l of e){if(l._id===this.ticket._id)break;o++}this.ticketsAhead=o;let r=c/i.length,a=n/i.length;this.averageToAtt="Su mesa estar\xe1 lista en "+C.a.duration((r+a)*this.ticketsAhead+(r+a)/4).humanize()}toggle(t){t.toggle()}enCamino(){this.coming=!0,this.wsService.emit("cliente-en-camino",this.publicService.ticket.id_socket_waiter)}callWaiter(t){this.publicService.callWaiter(this.ticket._id,t).subscribe(t=>{t.ok&&(this.ticket.tx_call=t.ticket.tx_call,this.snack.open(t.msg,"ACEPTAR",{duration:2e3}))})}endTicket(){return new Promise(t=>{this.sharedService.snack("Esta acci\xf3n finalizara su turno",5e3,"TERMINAR").then(e=>{e&&this.publicService.endTicket(this.ticket._id).subscribe(e=>{e.ok&&(t(),this.snack.open(e.msg,"ACEPTAR",{duration:2e3}),this.publicService.clearPublicSession(),this.router.navigate(["/home"]))})})})}getScoreItems(){return new Promise(t=>{this.publicService.getScoreItems(this.ticket.id_section._id).subscribe(e=>{this.scoreItems=e.scoreitems,t()})})}setScore(t,e){if(this.scores.set(t,e),this.scores.size===this.scoreItems.length){let t=this.ticket._id,e=[];this.scores.forEach(function(i,c,n){e.push({id_ticket:t,id_scoreitem:c,cd_score:i})}),this.publicService.sendScores(e).subscribe(t=>{t.ok&&delete this.ticket}),_.a.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",_.a.stopTimer),t.addEventListener("mouseleave",_.a.resumeTimer)}}).fire({icon:"success",title:"\xa1Gracias!"}).then(t=>{t.isDismissed&&this.publicService.clearPublicSessionComplete()})}}ngOnDestroy(){this.subjectUpdateTickets$.complete(),this.timer&&this.timer.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(B.a),o.Nb(r.a),o.Nb(a.a),o.Nb(w.a),o.Nb(s.b))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-myticket"]],decls:5,vars:4,consts:[[1,"saturno-card","m-0"],["class","screen-myticket-container  my-3",4,"ngIf"],["class","card text-white bg-dark p-3 my-4",4,"ngIf"],["class","container row px-0",4,"ngIf"],["class","card  p-2 my-4",4,"ngIf"],[1,"screen-myticket-container","my-3"],[1,"screen-myticket-text-header"],[1,"screen-myticket-text",3,"ngClass"],[1,"screen-myticket-text-footer","mt-3",2,"line-height","normal"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"card","text-white","bg-dark","p-3","my-4"],[1,"xl"],[1,"md","my-3","text-warning"],[1,"text-white","mt-4","table-responsive-sm"],[1,"table","table-sm","text-white","m-0"],[1,"lg","py-2"],[1,"p-0","py-2"],[1,"mdi","mdi-star","screen-icon-star",3,"ngClass","click"],[1,"container","row","px-0"],[1,"col-12","col-sm-6","p-1"],[1,"btn","btn-success","btn-block","p-0",3,"disabled","ngClass","click"],["width","100%"],[1,"rounded-left",2,"background-color","rgba(50, 50, 50, 0.3)"],[1,"mdi","mdi-silverware-fork-knife","xl"],[1,"btn","btn-danger","btn-block","p-0",3,"disabled","ngClass","click"],[1,"mdi","mdi-file-document-edit-outline","xl"],[1,"btn","btn-dark","btn-block","p-0",3,"disabled","ngClass","click"],[1,"mdi","mdi-power","xl"],[1,"card","p-2","my-4"],[1,"w-100","table-sm","text-center"],[1,"screen-history-title"],[1,"screen-history-text",2,"text-align","center"],[2,"padding","0","vertical-align","middle"],["style","color: blueviolet",4,"ngIf"],["style","color: red",4,"ngIf"],["style","color: green",4,"ngIf"],[2,"color","blueviolet"],[1,"mdi","mdi-contactless-payment-circle-outline","screen-history-icon"],[2,"color","red"],[1,"mdi","mdi-arrow-left-circle-outline","screen-history-icon"],[2,"color","green"],[1,"mdi","mdi-check-circle-outline","screen-history-icon"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Bc(1,A,9,7,"div",1),o.Bc(2,z,4,1,"div",2),o.Bc(3,q,25,12,"div",3),o.Bc(4,D,11,2,"div",4),o.Sb()),2&t&&(o.Bb(1),o.kc("ngIf",null===e.ticketTmEnd),o.Bb(1),o.kc("ngIf",null!==e.ticketTmEnd),o.Bb(1),o.kc("ngIf",null===e.ticketTmEnd),o.Bb(1),o.kc("ngIf",null===e.ticketTmEnd))},directives:[c.j,c.h,c.i],styles:[".screen-icon-star[_ngcontent-%COMP%]{cursor:pointer;color:#5e5e5e;font-size:x-large}.screen-icon-star-on[_ngcontent-%COMP%]{color:orange}.screen-myticket-container[_ngcontent-%COMP%]{padding:2em;width:13em;height:13em;line-height:3em;border-radius:50%;color:#2f4f4f;background-color:#fcfcfc}.screen-myticket-text-header[_ngcontent-%COMP%]{font-size:1.2em;color:grey}.screen-myticket-text[_ngcontent-%COMP%]{font-size:3.5em;color:red}.screen-myticket-text-alert[_ngcontent-%COMP%]{opacity:.1}.screen-myticket-text-footer[_ngcontent-%COMP%]{font-size:1em;color:grey}.screen-history-title[_ngcontent-%COMP%]{font-size:calc(.8em + .8vw);color:grey}.screen-history-text[_ngcontent-%COMP%]{font-size:calc(1em + .8vw)}.screen-history-icon[_ngcontent-%COMP%]{font-size:calc(1.2em + .8vw)}"]}),t})();var W=i("M9ds");let J=(()=>{class t{constructor(t,e){this.publicService=t,this.router=e}ngOnInit(){}salir(){this.publicService.clearPublicSession(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(r.a),o.Nb(s.b))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-home"]],decls:9,vars:0,consts:[[1,"saturno-card-wide","h-100"],["src","./assets/uploads/sandangabar/pageimg.jpg",1,"img-fluid","rounded"],[1,"bar-history"],[1,"col","btn","btn-danger","btn-block","rounded-0","mr-1","my-2",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"mat-card"),o.Ob(2,"img",1),o.Tb(3,"div",2),o.Tb(4,"p"),o.Cc(5," Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam et a quod voluptatibus nemo iusto neque animi vitae doloribus provident, magni, officia eveniet laborum quia, necessitatibus adipisci! Libero, officiis quos. Ullam corporis sint minima dolorum dignissimos, eos dolor praesentium enim voluptatibus impedit dicta suscipit exercitationem libero assumenda nulla! Excepturi pariatur id voluptatum assumenda minima, veniam sed adipisci quis dolorem repudiandae dolor ipsum nobis, nesciunt consectetur inventore et consequatur eaque dolores exercitationem explicabo, eos optio totam voluptates non? Eius praesentium facere porro eligendi. Iusto repellat, provident sint ab commodi vel alias tempore mollitia aspernatur, illo omnis voluptate autem distinctio voluptatibus inventore. "),o.Sb(),o.Sb(),o.Tb(6,"div"),o.Tb(7,"button",3),o.ac("click",function(){return e.salir()}),o.Cc(8," Salir "),o.Sb(),o.Sb(),o.Sb(),o.Sb())},directives:[l.a],styles:['.bar-history[_ngcontent-%COMP%]{font-family:"system-ui";font-size:small;font-weight:200;padding:1em}']}),t})(),V=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-menu"]],decls:2,vars:0,template:function(t,e){1&t&&(o.Tb(0,"p"),o.Cc(1,"menu works!"),o.Sb())},styles:[""]}),t})();var X=i("ZTz/");function Z(t,e){1&t&&(o.Tb(0,"h5",12),o.Tb(1,"span",13),o.Cc(2," Cargando... "),o.Sb(),o.Sb())}function K(t,e){if(1&t&&(o.Tb(0,"div"),o.Tb(1,"div",14),o.Tb(2,"p",15),o.Cc(3),o.Sb(),o.Tb(4,"p",16),o.Cc(5),o.Sb(),o.Sb(),o.Sb()),2&t){const t=o.ec(2);o.Bb(3),o.Ec(" ",t.publicService.company.tx_company_name," "),o.Bb(2),o.Gc(" ",t.publicService.company.tx_address_street," ",t.publicService.company.tx_address_number," ",t.publicService.company.cd_city," ")}}function Y(t,e){if(1&t&&(o.Tb(0,"mat-option",17),o.Cc(1),o.Sb()),2&t){const t=e.$implicit;o.kc("value",t._id),o.Bb(1),o.Ec(" ",t.tx_section,"")}}function Q(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div"),o.Bc(1,Z,3,0,"h5",2),o.Bc(2,K,6,4,"div",1),o.Tb(3,"form",3,4),o.Tb(5,"mat-form-field",5),o.Tb(6,"mat-label"),o.Cc(7,"Cantidad de Personas"),o.Sb(),o.Ob(8,"input",6),o.Sb(),o.Tb(9,"mat-form-field",5),o.Tb(10,"mat-label"),o.Cc(11,"Sector"),o.Sb(),o.Tb(12,"mat-select",7),o.Bc(13,Y,2,2,"mat-option",8),o.Sb(),o.Sb(),o.Tb(14,"div",9),o.Tb(15,"button",10),o.ac("click",function(){return o.tc(t),o.ec().salir()}),o.Cc(16," Salir "),o.Sb(),o.Tb(17,"button",11),o.ac("click",function(){return o.tc(t),o.ec().createTicket()}),o.Cc(18," Solicitar "),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.kc("ngIf",t.loading),o.Bb(1),o.kc("ngIf",!t.loading),o.Bb(1),o.kc("formGroup",t.ticketForm),o.Bb(10),o.kc("ngForOf",t.sections)}}let tt=(()=>{class t{constructor(t,e,i,c){this.wsService=t,this.publicService=e,this.sharedService=i,this.router=c,this.loading=!1,this.sections=[]}ngOnInit(){if(this.ticketForm=new n.i({nmPersons:new n.f("",[n.w.required]),idSection:new n.f("",[n.w.required])}),this.publicService.ticket)this.sharedService.snack("Ya ten\xe9s un turno!",2e3),this.router.navigate(["/public/myticket"]);else if(this.publicService.company){let t=this.publicService.company._id;this.wsService.emit("enterCompany",t),this.loading=!0,this.publicService.readSections(t).subscribe(t=>{this.loading=!1,this.sections=t.sections})}else this.sharedService.snack("Por favor eleg\xed un bar primero.",2e3),this.router.navigate(["/public"])}createTicket(){if(localStorage.getItem("user"))return void _.a.fire({icon:"error",title:"Est\xe1s haciendo pruebas?",text:"Est\xe1s en una p\xe1gina de acceso al p\xfablico pero ten\xe9s una sesi\xf3n de usuario activa. Para obtener un turno ten\xe9s cerrar la sesi\xf3n de usuario o abrir una pesta\xf1a en modo inc\xf3gnito."});this.loading=!0;let t=this.wsService.idSocket,e=this.ticketForm.value.nmPersons,i=this.ticketForm.value.idSection;this.loading=!0,this.publicService.createTicket(t,e,i).subscribe(t=>{t.ok&&(this.loading=!1,localStorage.setItem("ticket",JSON.stringify(t.ticket)),this.publicService.ticket=t.ticket,this.router.navigate(["/public/myticket"]))})}salir(){this.publicService.clearPublicSession(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(B.a),o.Nb(r.a),o.Nb(a.a),o.Nb(s.b))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-table"]],decls:2,vars:1,consts:[[1,"saturno-card","m-3","animated","fadeIn"],[4,"ngIf"],["class","card-title",4,"ngIf"],["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup"],["formDirective","ngForm"],["color","warn","logincss","",1,"w-100"],["matInput","","placeholder","Cantidad de Personas","formControlName","nmPersons","name","nmPersons","type","number","required",""],["formControlName","idSection","name","idSection","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","mx-0"],[1,"col","btn","btn-danger","btn-block","rounded-0","mr-1","my-2",3,"click"],[1,"col","btn","btn-success","btn-block","rounded-0","ml-1","my-2",3,"click"],[1,"card-title"],["id","lblNuevoTicket"],[1,"card","pb-2","pt-4","mb-4"],[1,"xxl","text-primary"],[1,"lg","text-secondary"],[3,"value"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Bc(1,Q,19,4,"div",1),o.Sb()),2&t&&(o.Bb(1),o.kc("ngIf",e.publicService.company))},directives:[c.j,n.q,n.j,b.c,b.f,u.b,n.d,n.t,n.p,n.h,n.v,X.a,c.i,m.l],styles:[""]}),t})();const et=[{path:"companypage",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-company-page"]],decls:8,vars:0,consts:[[1,"container-fluid","h-100"],["mat-align-tabs","center","dynamicHeight",""],["label","Sandanga Bar"],["label","Men\xfa"],["label","Reservar Mesa"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"mat-tab-group",1),o.Tb(2,"mat-tab",2),o.Ob(3,"app-home"),o.Sb(),o.Tb(4,"mat-tab",3),o.Ob(5,"app-menu"),o.Sb(),o.Tb(6,"mat-tab",4),o.Ob(7,"app-table"),o.Sb(),o.Sb(),o.Sb())},directives:[W.b,W.a,J,V,tt],styles:[""]}),t})()},{path:"myticket",component:G},{path:"",component:h},{path:":company",component:f.a},{path:"**",component:k.a}];let it=(()=>{class t{}return t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(et)],s.e]}),t})();var ct=i("1+r1"),nt=i("j1ZV"),st=i("iTUp");let ot=(()=>{class t{}return t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({factory:function(e){return new(e||t)},imports:[[c.b,n.u,n.k,ct.a,nt.a,it,st.a]]}),t})()}}]);