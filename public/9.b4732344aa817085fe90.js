(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{rakS:function(t,e,i){"use strict";i.r(e),i.d(e,"WaiterModule",function(){return ti});var n=i("SVse"),c=i("s7LF"),s=i("iInd"),a=i("AIE+"),l=i("mrSG"),o=i("XNiG"),r=i("l5mm"),b=i("8Y7J"),d=i("EFyh"),u=i("d+tV"),m=i("zuHl"),f=i("Gyf/"),p=i("wd/R"),g=i.n(p);let h=(()=>{class t{transform(t,e){if(!t)return"-";e||(e=+new Date);let i=g.a.duration(e-t),n=i.hours(),c=i.minutes(),s=i.seconds();return`${0===n?"":n.toString()+":"}${c<=9?"0"+c.toString()+":":c.toString()+":"}${s<=9?"0"+s.toString():s.toString()}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=b.Mb({name:"intervalToHms",type:t,pure:!0}),t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=i("pu8Q"),v=i("o4Yh"),_=i("zQhy"),T=i("OaSA");function x(t,e){1&t&&(b.Tb(0,"th",16),b.Hc(1," Sector "),b.Sb())}function w(t,e){1&t&&b.Ob(0,"span",19)}function k(t,e){if(1&t&&(b.Tb(0,"td",17),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Fc(3,w,1,0,"span",18),b.Sb()),2&t){const t=e.$implicit,i=b.ec();b.Bb(2),b.Jc(" ",t.tx_section,""),b.Bb(1),b.lc("ngIf",i.tablesDataBySection.get(t.tx_section).sectionselected)}}function y(t,e){1&t&&(b.Tb(0,"th",20),b.Hc(1," Disp "),b.Sb())}function O(t,e){if(1&t&&(b.Tb(0,"td",21),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec();b.Bb(2),b.Ic(i.tablesDataBySection.get(t.tx_section).idle)}}function B(t,e){1&t&&(b.Tb(0,"th",20),b.Hc(1," Paus "),b.Sb())}function H(t,e){if(1&t&&(b.Tb(0,"td",21),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec();b.Bb(2),b.Ic(i.tablesDataBySection.get(t.tx_section).paused)}}function C(t,e){1&t&&(b.Tb(0,"th",20),b.Hc(1," Ocup "),b.Sb())}function I(t,e){if(1&t&&(b.Tb(0,"td",21),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec();b.Bb(2),b.Ic(i.tablesDataBySection.get(t.tx_section).busy)}}function F(t,e){1&t&&(b.Tb(0,"th",20),b.Hc(1," Req "),b.Sb())}function D(t,e){if(1&t&&(b.Tb(0,"td",21),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec();b.Bb(2),b.Ic(i.ticketsDataBySection.get(t.tx_section).requested)}}function M(t,e){1&t&&(b.Tb(0,"th",20),b.Hc(1," Cola "),b.Sb())}function P(t,e){if(1&t&&(b.Tb(0,"td",21),b.Tb(1,"span",22),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec();b.Bb(2),b.Ic(i.ticketsDataBySection.get(t.tx_section).queued)}}function R(t,e){1&t&&b.Ob(0,"tr",23)}function $(t,e){1&t&&b.Ob(0,"tr",24)}let j=(()=>{class t{constructor(t,e){this.loginService=t,this.waiterService=e,this.displayedColumns=["sector","disponibles","pausadas","ocupadas","requeridos","encolados"]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a),b.Nb(u.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-sections"]],inputs:{tablesDataBySection:"tablesDataBySection",ticketsDataBySection:"ticketsDataBySection"},decls:28,vars:5,consts:[[1,"xl","mdi","mdi-select-group","text-success"],[1,"sidenav-title-text","mx-2"],[3,"ngModel","ngModelChange"],["mat-table","",3,"dataSource"],["matColumnDef","sector"],["mat-header-cell","","class","text-left",4,"matHeaderCellDef"],["mat-cell","","class","text-left",4,"matCellDef"],["matColumnDef","disponibles"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","pausadas"],["matColumnDef","ocupadas"],["matColumnDef","requeridos"],["matColumnDef","encolados"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-left"],["mat-cell","",1,"text-left"],["class","mdi mdi-check lg",4,"ngIf"],[1,"mdi","mdi-check","lg"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[1,"ml-2"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Tb(0,"mat-expansion-panel"),b.Tb(1,"mat-expansion-panel-header"),b.Tb(2,"mat-panel-title"),b.Ob(3,"span",0),b.Tb(4,"span",1),b.Hc(5),b.Sb(),b.Sb(),b.Sb(),b.Tb(6,"mat-radio-group",2),b.ac("ngModelChange",function(t){return e.waiterService.sectionSelected=t}),b.Tb(7,"table",3),b.Rb(8,4),b.Fc(9,x,2,0,"th",5),b.Fc(10,k,4,2,"td",6),b.Qb(),b.Rb(11,7),b.Fc(12,y,2,0,"th",8),b.Fc(13,O,3,1,"td",9),b.Qb(),b.Rb(14,10),b.Fc(15,B,2,0,"th",8),b.Fc(16,H,3,1,"td",9),b.Qb(),b.Rb(17,11),b.Fc(18,C,2,0,"th",8),b.Fc(19,I,3,1,"td",9),b.Qb(),b.Rb(20,12),b.Fc(21,F,2,0,"th",8),b.Fc(22,D,3,1,"td",9),b.Qb(),b.Rb(23,13),b.Fc(24,M,2,0,"th",8),b.Fc(25,P,3,1,"td",9),b.Qb(),b.Fc(26,R,1,0,"tr",14),b.Fc(27,$,1,0,"tr",15),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(5),b.Jc("Sectores (",e.waiterService.sections.length,")"),b.Bb(1),b.lc("ngModel",e.waiterService.sectionSelected),b.Bb(1),b.lc("dataSource",e.waiterService.sections),b.Bb(19),b.lc("matHeaderRowDef",e.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",e.displayedColumns))},directives:[v.c,v.d,v.e,_.a,c.q,c.t,T.j,T.c,T.e,T.b,T.g,T.i,T.d,T.a,n.k,T.f,T.h],styles:[""]}),t})();var q=i("GS7A"),E=i("pMoy");function N(t,e){1&t&&b.Ob(0,"span",8)}function J(t,e){1&t&&b.Ob(0,"span",9)}function U(t,e){1&t&&b.Ob(0,"span",10)}function Q(t,e){1&t&&b.Ob(0,"span",11)}function A(t,e){1&t&&b.Ob(0,"span",12)}function W(t,e){1&t&&b.Ob(0,"span",13)}function z(t,e){1&t&&b.Ob(0,"span",14)}function L(t,e){if(1&t&&(b.Tb(0,"div"),b.Fc(1,N,1,0,"span",1),b.Fc(2,J,1,0,"span",2),b.Fc(3,U,1,0,"span",3),b.Fc(4,Q,1,0,"span",4),b.Fc(5,A,1,0,"span",5),b.Fc(6,W,1,0,"span",6),b.Fc(7,z,1,0,"span",7),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.lc("ngIf","busy"===t.table.tx_status&&null===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call)),b.Bb(1),b.lc("ngIf","paused"===t.table.tx_status),b.Bb(1),b.lc("ngIf","idle"===t.table.tx_status),b.Bb(1),b.lc("ngIf","reserved"===t.table.tx_status),b.Bb(1),b.lc("ngIf","card"===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call)),b.Bb(1),b.lc("ngIf","waiter"===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call)),b.Bb(1),b.lc("ngIf","account"===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call))}}function G(t,e){1&t&&b.Ob(0,"span",22)}function V(t,e){1&t&&b.Ob(0,"span",23)}function Z(t,e){1&t&&b.Ob(0,"span",24)}function K(t,e){1&t&&b.Ob(0,"span",25)}function X(t,e){1&t&&b.Ob(0,"span",26)}function Y(t,e){1&t&&b.Ob(0,"span",27)}function tt(t,e){1&t&&b.Ob(0,"span",28)}function et(t,e){if(1&t&&(b.Tb(0,"div"),b.Fc(1,G,1,0,"span",15),b.Fc(2,V,1,0,"span",16),b.Fc(3,Z,1,0,"span",17),b.Fc(4,K,1,0,"span",18),b.Fc(5,X,1,0,"span",19),b.Fc(6,Y,1,0,"span",20),b.Fc(7,tt,1,0,"span",21),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.lc("ngIf","busy"===t.table.tx_status&&null===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call)),b.Bb(1),b.lc("ngIf","paused"===t.table.tx_status),b.Bb(1),b.lc("ngIf","idle"===t.table.tx_status),b.Bb(1),b.lc("ngIf","reserved"===t.table.tx_status),b.Bb(1),b.lc("ngIf","card"===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call)),b.Bb(1),b.lc("ngIf","waiter"===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call)),b.Bb(1),b.lc("ngIf","account"===(null==t.table.id_session?null:t.table.id_session.id_ticket.tx_call))}}let it=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Hb({type:t,selectors:[["app-table-info"]],inputs:{table:"table",listmode:"listmode"},decls:2,vars:2,consts:[[4,"ngIf"],["class","mdi mdi-minus-circle-outline lg text-danger",4,"ngIf"],["class","mdi mdi-pause-circle-outline text-secondary lg",4,"ngIf"],["class","mdi mdi-check-circle-outline text-success lg",4,"ngIf"],["class","mdi mdi-stop-circle-outline text-danger lg",4,"ngIf"],["class","mdi mdi-book-open-variant text-warning lg",4,"ngIf"],["class","mdi mdi-silverware-fork-knife text-warning lg",4,"ngIf"],["class","mdi mdi-file-document-edit-outline text-warning lg",4,"ngIf"],[1,"mdi","mdi-minus-circle-outline","lg","text-danger"],[1,"mdi","mdi-pause-circle-outline","text-secondary","lg"],[1,"mdi","mdi-check-circle-outline","text-success","lg"],[1,"mdi","mdi-stop-circle-outline","text-danger","lg"],[1,"mdi","mdi-book-open-variant","text-warning","lg"],[1,"mdi","mdi-silverware-fork-knife","text-warning","lg"],[1,"mdi","mdi-file-document-edit-outline","text-warning","lg"],["class","mdi mdi-minus-circle-outline xxl text-danger",4,"ngIf"],["class","mdi mdi-pause-circle-outline text-secondary xxl",4,"ngIf"],["class","mdi mdi-check-circle-outline text-success xxl",4,"ngIf"],["class","mdi mdi-stop-circle-outline text-danger xxl",4,"ngIf"],["class","mdi mdi-book-open-variant text-warning xxl",4,"ngIf"],["class","mdi mdi-silverware-fork-knife text-warning xxl",4,"ngIf"],["class","mdi mdi-file-document-edit-outline text-warning xxl",4,"ngIf"],[1,"mdi","mdi-minus-circle-outline","xxl","text-danger"],[1,"mdi","mdi-pause-circle-outline","text-secondary","xxl"],[1,"mdi","mdi-check-circle-outline","text-success","xxl"],[1,"mdi","mdi-stop-circle-outline","text-danger","xxl"],[1,"mdi","mdi-book-open-variant","text-warning","xxl"],[1,"mdi","mdi-silverware-fork-knife","text-warning","xxl"],[1,"mdi","mdi-file-document-edit-outline","text-warning","xxl"]],template:function(t,e){1&t&&(b.Fc(0,L,8,7,"div",0),b.Fc(1,et,8,7,"div",0)),2&t&&(b.lc("ngIf",e.listmode),b.Bb(1),b.lc("ngIf",!e.listmode))},directives:[n.k],styles:[""]}),t})();var nt=i("Dxy4"),ct=i("jMqV");function st(t,e){1&t&&(b.Tb(0,"th",26),b.Hc(1," Estado "),b.Sb())}function at(t,e){if(1&t&&(b.Tb(0,"td",27),b.Ob(1,"app-table-info",28),b.Sb()),2&t){const t=e.$implicit,i=b.ec(3);b.Bb(1),b.lc("listmode",i.listmode)("table",t)}}function lt(t,e){1&t&&(b.Tb(0,"th",29),b.Hc(1," Mesa "),b.Sb())}function ot(t,e){if(1&t&&(b.Tb(0,"td",30),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.nm_table)}}function rt(t,e){1&t&&(b.Tb(0,"th",29),b.Hc(1," Cap "),b.Sb())}function bt(t,e){if(1&t&&(b.Tb(0,"td",30),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.nm_persons)}}function dt(t,e){1&t&&(b.Tb(0,"th",29),b.Hc(1," Turno "),b.Sb())}function ut(t,e){if(1&t&&(b.Tb(0,"td",30),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(null==t.id_session?null:t.id_session.id_ticket.id_position)}}function mt(t,e){1&t&&(b.Tb(0,"th",29),b.Hc(1," Pers "),b.Sb())}function ft(t,e){if(1&t&&(b.Tb(0,"td",30),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(null==t.id_session?null:t.id_session.id_ticket.nm_persons)}}function pt(t,e){1&t&&(b.Tb(0,"th",29),b.Hc(1," Ocup "),b.Sb())}function gt(t,e){if(1&t&&(b.Tb(0,"td",30),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec(3);let n=null;b.Bb(2),b.Ic(null==(n=i.busyTablesTimes.get(t.nm_table))?null:n.tm_provided)}}function ht(t,e){1&t&&(b.Tb(0,"th",31),b.Hc(1," Espera "),b.Sb())}function St(t,e){if(1&t&&(b.Tb(0,"td",32),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec(3);let n=null;b.Bb(2),b.Ic(null==(n=i.busyTablesTimes.get(t.nm_table))?null:n.tm_call)}}function vt(t,e){1&t&&b.Ob(0,"div")}function _t(t,e){if(1&t&&(b.Tb(0,"td",33),b.Tb(1,"div",34),b.Fc(2,vt,1,0,"div",35),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec(3),n=b.tc(11);b.Cb("colspan",i.displayedColumns.length),b.Bb(1),b.lc("@detailExpand",t==i.expandedElement?"expanded":"collapsed"),b.Bb(1),b.lc("ngIf",i.table)("ngIfThen",n)}}function Tt(t,e){1&t&&b.Ob(0,"tr",36)}function xt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",37),b.ac("click",function(){b.wc(t);const i=e.$implicit;return b.ec(3).selectTable(i)})("click",function(){b.wc(t);const i=e.$implicit,n=b.ec(3);return n.expandedElement=n.expandedElement===i?null:i}),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec(3);b.Fb("expanded-row",i.expandedElement===t)}}function wt(t,e){1&t&&b.Ob(0,"tr",38)}const kt=function(){return["expandedDetail"]};function yt(t,e){if(1&t&&(b.Tb(0,"table",7),b.Rb(1,8),b.Fc(2,st,2,0,"th",9),b.Fc(3,at,2,2,"td",10),b.Qb(),b.Rb(4,11),b.Fc(5,lt,2,0,"th",12),b.Fc(6,ot,3,1,"td",13),b.Qb(),b.Rb(7,14),b.Fc(8,rt,2,0,"th",12),b.Fc(9,bt,3,1,"td",13),b.Qb(),b.Rb(10,15),b.Fc(11,dt,2,0,"th",12),b.Fc(12,ut,3,1,"td",13),b.Qb(),b.Rb(13,16),b.Fc(14,mt,2,0,"th",12),b.Fc(15,ft,3,1,"td",13),b.Qb(),b.Rb(16,17),b.Fc(17,pt,2,0,"th",12),b.Fc(18,gt,3,1,"td",13),b.Qb(),b.Rb(19,18),b.Fc(20,ht,2,0,"th",19),b.Fc(21,St,3,1,"td",20),b.Qb(),b.Rb(22,21),b.Fc(23,_t,3,4,"td",22),b.Qb(),b.Fc(24,Tt,1,0,"tr",23),b.Fc(25,xt,1,2,"tr",24),b.Fc(26,wt,1,0,"tr",25),b.Sb()),2&t){const t=b.ec(2);b.lc("dataSource",t.tables),b.Bb(24),b.lc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",t.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",b.oc(4,kt))}}function Ot(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"mat-radio-group",5),b.ac("ngModelChange",function(e){return b.wc(t),b.ec().tableSelected=e}),b.Fc(2,yt,27,5,"table",6),b.Sb(),b.Sb()}if(2&t){const t=b.ec();b.Bb(1),b.lc("ngModel",t.tableSelected),b.Bb(1),b.lc("ngIf",t.tables&&t.busyTablesTimes)}}function Bt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"button",40),b.ac("click",function(){b.wc(t);const i=e.$implicit;return b.ec(2).selectTable(i)}),b.Tb(1,"div",41),b.Hc(2),b.Sb(),b.Ob(3,"app-table-info",28),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec(2);b.Bb(2),b.Ic(t.nm_table),b.Bb(1),b.lc("listmode",i.listmode)("table",t)}}function Ht(t,e){1&t&&b.Ob(0,"div")}function Ct(t,e){if(1&t&&(b.Tb(0,"div"),b.Fc(1,Bt,4,3,"button",39),b.Fc(2,Ht,1,0,"div",35),b.Sb()),2&t){const t=b.ec(),e=b.tc(11);b.Bb(1),b.lc("ngForOf",t.tables),b.Bb(1),b.lc("ngIf",t.table)("ngIfThen",e)}}function It(t,e){1&t&&(b.Tb(0,"span"),b.Hc(1," Ocupada "),b.Sb())}function Ft(t,e){1&t&&(b.Tb(0,"span"),b.Hc(1," Pausada "),b.Sb())}function Dt(t,e){1&t&&(b.Tb(0,"span"),b.Hc(1," Disponible "),b.Sb())}function Mt(t,e){1&t&&(b.Tb(0,"span"),b.Hc(1," Reservada "),b.Sb())}function Pt(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"table"),b.Tb(2,"tr"),b.Tb(3,"td",56),b.Hc(4,"Turno"),b.Sb(),b.Tb(5,"td",57),b.Hc(6),b.Sb(),b.Sb(),b.Tb(7,"tr"),b.Tb(8,"td",56),b.Hc(9,"Comensales"),b.Sb(),b.Tb(10,"td",57),b.Hc(11),b.Sb(),b.Sb(),b.Tb(12,"tr"),b.Tb(13,"td",56),b.Hc(14,"Prioridad"),b.Sb(),b.Tb(15,"td",57),b.Hc(16),b.Sb(),b.Sb(),b.Tb(17,"tr"),b.Tb(18,"td",56),b.Hc(19,"Provisi\xf3n"),b.Sb(),b.Tb(20,"td",57),b.Hc(21),b.Sb(),b.Sb(),b.Tb(22,"tr"),b.Tb(23,"td",56),b.Hc(24," Solicitud de asistencia "),b.Sb(),b.Tb(25,"td",57),b.Hc(26),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec(3);let e=null,i=null;b.Bb(6),b.Jc(" ",null==t.table||null==t.table.id_session?null:t.table.id_session.id_ticket.id_position," "),b.Bb(5),b.Jc(" ",null==t.table||null==t.table.id_session?null:t.table.id_session.id_ticket.nm_persons," "),b.Bb(5),b.Jc(" ",null==t.table||null==t.table.id_session?null:t.table.id_session.id_ticket.bl_priority," "),b.Bb(5),b.Jc(" ",null==(e=t.busyTablesTimes.get(t.table.nm_table))?null:e.tm_provided," "),b.Bb(5),b.Jc(" ",null==(i=t.busyTablesTimes.get(t.table.nm_table))?null:i.tm_call," ")}}function Rt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",42),b.Tb(2,"div",43),b.Hc(3),b.Fc(4,It,2,0,"span",3),b.Fc(5,Ft,2,0,"span",3),b.Fc(6,Dt,2,0,"span",3),b.Fc(7,Mt,2,0,"span",3),b.Sb(),b.Fc(8,Pt,27,5,"div",3),b.Sb(),b.Tb(9,"div",44),b.Tb(10,"button",45),b.Ob(11,"div",46),b.Tb(12,"mat-slide-toggle",47),b.ac("click",function(){b.wc(t);const e=b.ec(2);return e.toggleTableStatus(e.table)}),b.Sb(),b.Sb(),b.Tb(13,"button",45),b.Ob(14,"div",48),b.Tb(15,"mat-slide-toggle",49),b.ac("ngModelChange",function(e){return b.wc(t),b.ec(2).blPriority=e}),b.Sb(),b.Sb(),b.Tb(16,"div"),b.Tb(17,"button",50),b.ac("click",function(){b.wc(t);const e=b.ec(2);return e.reassignTicket(null==e.table.id_session?null:e.table.id_session.id_ticket)}),b.Ob(18,"div",51),b.Tb(19,"div",52),b.Hc(20,"Mover"),b.Sb(),b.Sb(),b.Sb(),b.Tb(21,"button",50),b.ac("click",function(){b.wc(t);const e=b.ec(2);return e.attendedTicket(null==e.table.id_session?null:e.table.id_session.id_ticket)}),b.Ob(22,"div",53),b.Tb(23,"div",52),b.Hc(24,"Atendido"),b.Sb(),b.Sb(),b.Tb(25,"button",50),b.ac("click",function(){b.wc(t);const e=b.ec(2);return e.releaseTicket(null==e.table.id_session?null:e.table.id_session.id_ticket)}),b.Ob(26,"div",54),b.Tb(27,"div",52),b.Hc(28,"Soltar"),b.Sb(),b.Sb(),b.Tb(29,"button",50),b.ac("click",function(){b.wc(t);const e=b.ec(2);return e.endTicket(null==e.table.id_session?null:e.table.id_session.id_ticket)}),b.Ob(30,"div",55),b.Tb(31,"div",52),b.Hc(32,"Cerrar"),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Bb(3),b.Jc(" Mesa ",t.table.nm_table,": "),b.Bb(1),b.lc("ngIf","busy"===t.table.tx_status),b.Bb(1),b.lc("ngIf","paused"===t.table.tx_status),b.Bb(1),b.lc("ngIf","idle"===t.table.tx_status),b.Bb(1),b.lc("ngIf","reserved"===t.table.tx_status),b.Bb(1),b.lc("ngIf",null==t.table?null:t.table.id_session),b.Bb(2),b.lc("disabled","busy"===t.table.tx_status),b.Bb(2),b.lc("checked","paused"!==t.table.tx_status)("disabled","busy"===t.table.tx_status),b.Bb(1),b.lc("disabled",!t.table.id_session||""===t.waiterService.sectionSelected),b.Bb(2),b.lc("ngModel",t.blPriority)("disabled",!t.table.id_session||""===t.waiterService.sectionSelected),b.Bb(2),b.lc("disabled",!t.table.id_session||""===t.waiterService.sectionSelected),b.Bb(4),b.lc("disabled",!(null!=t.table.id_session&&t.table.id_session.id_ticket.tx_call)||"busy"!==t.table.tx_status),b.Bb(4),b.lc("disabled","busy"!==t.table.tx_status),b.Bb(4),b.lc("disabled","busy"!==t.table.tx_status)}}function $t(t,e){if(1&t&&b.Fc(0,Rt,33,16,"div",3),2&t){const t=b.ec();b.lc("ngIf",t.table)}}let jt=(()=>{class t{constructor(t,e,i,n){this.loginService=t,this.waiterService=e,this.sharedService=i,this.intervalToHmsPipe=n,this.tables=[],this.tickets=[],this.displayedColumns=["estado","mesa","capacidad","turno","personas","ocupado","espera"],this.listmode=!1,this.tableSelected="",this.blPriority=!1,this.selectTable=t=>{this.table=t},this.toggleTableStatus=t=>{"busy"!==t.tx_status&&this.waiterService.toggleTableStatus(t._id).subscribe(e=>{e.ok?(this.tables.filter(t=>t._id===e.table._id)[0].tx_status=e.table.tx_status,t.tx_status=e.table.tx_status):this.sharedService.snack(e.msg,2e3)})},this.releaseTicket=t=>{t?this.sharedService.snack("Desea soltar el ticket y devolverlo a su estado anterior?",5e3,"ACEPTAR").then(e=>{e&&this.waiterService.releaseTicket(t).subscribe(e=>{e.ok&&(this.tickets=this.tickets.filter(t=>t._id!=t._id),this.clearTicketSession(t))})}):this.sharedService.snack("Error. No hay clientes en esta mesa.",5e3)},this.reassignTicket=t=>{t?this.sharedService.snack("Desea enviar el ticket al skill seleccionado?",5e3,"ACEPTAR").then(e=>{if(e){let e=t._id,i=this.waiterService.sectionSelected,n=this.blPriority;e&&i&&this.waiterService.reassignTicket(e,i,n).subscribe(e=>{e.ok&&(this.blPriority=!1,this.clearTicketSession(t))})}}):this.sharedService.snack("Error. No hay clientes en esta mesa.",5e3)},this.endTicket=t=>{t||this.sharedService.snack("Seleccione una mesa primero",3e3);let e=t._id;this.tickets&&this.sharedService.snack("Desea finalizar el ticket actual?",5e3,"ACEPTAR").then(i=>{i&&this.waiterService.endTicket(e).subscribe(e=>{e.ok&&(this.clearTicketSession(t),this.clearTableSession(t))})})},this.attendedTicket=t=>{this.waiterService.attendedTicket(t).subscribe(t=>{t.ok&&(this.tables.filter(e=>{var i;return(null===(i=e.id_session)||void 0===i?void 0:i.id_ticket._id)===t.ticket._id})[0].id_session.id_ticket.tx_call=null)})},this.setListMode=()=>{if(localStorage.getItem("config")){let t=JSON.parse(localStorage.getItem("config"));t.listmode=!this.listmode,localStorage.setItem("config",JSON.stringify(t))}else localStorage.setItem("config",JSON.stringify({listmode:!0}))},this.clearTicketSession=t=>{this.tickets=this.tickets.filter(e=>e._id!==t._id)},this.clearTableSession=t=>{let e=this.tables.filter(e=>{var i;return(null===(i=e.id_session)||void 0===i?void 0:i.id_ticket._id)===t._id})[0];e.tx_status="paused",e.id_session=null}}ngOnInit(){let t=JSON.parse(localStorage.getItem("config"));this.listmode=!!t&&t.listmode}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a),b.Nb(u.a),b.Nb(m.a),b.Nb(h))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-tables"]],inputs:{tables:"tables",tickets:"tickets",busyTablesTimes:"busyTablesTimes"},decls:12,vars:4,consts:[[1,"xl","mdi","mdi-silverware-fork-knife","text-warning"],[1,"sidenav-title-text","mx-2"],[1,"margin",3,"ngModel","ngModelChange","click"],[4,"ngIf"],["tableinfo",""],[3,"ngModel","ngModelChange"],["mat-table","","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","estado"],["mat-header-cell","","class","text-left",4,"matHeaderCellDef"],["mat-cell","","class","text-left",4,"matCellDef"],["matColumnDef","mesa"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","capacidad"],["matColumnDef","turno"],["matColumnDef","personas"],["matColumnDef","ocupado"],["matColumnDef","espera"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","expandedDetail"],["class","td-expanded px-0","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","tables-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-left"],["mat-cell","",1,"text-left"],[3,"listmode","table"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-cell","",1,"td-expanded","px-0"],[1,"ticket-container"],[4,"ngIf","ngIfThen"],["mat-header-row",""],["mat-row","",1,"tables-row",3,"click"],["mat-row","",1,"detail-row"],["mat-raised-button","","class","w-8em m-1","color","primary",3,"click",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"w-8em","m-1",3,"click"],[1,"xl"],[1,"ticket-status"],[1,"lg"],[1,"ticket-actions"],["mat-raised-button","","color","primary",1,"action-button","m-1",3,"disabled"],[1,"mdi","mdi-power","xl"],[2,"color","tomato",3,"checked","disabled","click"],[1,"mdi","mdi-priority-high","xl"],[3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","color","primary",1,"action-button","m-1",3,"disabled","click"],[1,"mdi","mdi-arrow-right-bold-circle-outline","xl"],[1,"sm"],[1,"mdi","mdi-bell","xl"],[1,"mdi","mdi-replay","xl"],[1,"mdi","mdi-close","xl"],[2,"text-align","left","border","none"],[2,"text-align","right","border","none"]],template:function(t,e){1&t&&(b.Tb(0,"mat-expansion-panel"),b.Tb(1,"mat-expansion-panel-header"),b.Tb(2,"mat-panel-title"),b.Ob(3,"span",0),b.Tb(4,"span",1),b.Hc(5),b.Sb(),b.Sb(),b.Sb(),b.Tb(6,"mat-checkbox",2),b.ac("ngModelChange",function(t){return e.listmode=t})("click",function(){return e.setListMode()}),b.Hc(7,"Modo Lista"),b.Sb(),b.Fc(8,Ot,3,2,"div",3),b.Fc(9,Ct,3,3,"div",3),b.Sb(),b.Fc(10,$t,1,1,"ng-template",null,4,b.Gc)),2&t&&(b.Bb(5),b.Jc("Mesas (",e.tables.length,")"),b.Bb(1),b.lc("ngModel",e.listmode),b.Bb(2),b.lc("ngIf",e.listmode),b.Bb(1),b.lc("ngIf",!e.listmode))},directives:[v.c,v.d,v.e,E.a,c.q,c.t,n.k,_.a,T.j,T.c,T.e,T.b,T.g,T.i,T.d,T.a,it,T.f,T.h,n.j,nt.a,ct.a],styles:[".row[_ngcontent-%COMP%]:hover{background-color:#ff4500}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background:#f5f5f5}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):active{background:#efefef}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.ticket-container[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-flow:wrap}.ticket-status[_ngcontent-%COMP%]{width:100%;padding:1.5em}.ticket-actions[_ngcontent-%COMP%]{justify-content:center;width:100%;display:flex;flex-flow:wrap}.action-button[_ngcontent-%COMP%]{width:80px;padding:0}button[_ngcontent-%COMP%]   div.mdi[_ngcontent-%COMP%]{opacity:.3}.tables-row[_ngcontent-%COMP%]:hover{background-color:rgba(0,255,0,.15);cursor:pointer}"],data:{animation:[Object(q.l)("detailExpand",[Object(q.i)("collapsed",Object(q.j)({height:"0px",minHeight:"0"})),Object(q.i)("expanded",Object(q.j)({height:"*"})),Object(q.k)("expanded <=> collapsed",Object(q.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();function qt(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Ticket # "),b.Sb())}function Et(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.id_position)}}function Nt(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Personas "),b.Sb())}function Jt(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.nm_persons)}}function Ut(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Estado "),b.Sb())}function Qt(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.tx_status)}}function At(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Sector "),b.Sb())}function Wt(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.id_section.tx_section)}}function zt(t,e){1&t&&b.Ob(0,"span",32)}function Lt(t,e){if(1&t&&(b.Tb(0,"span",33),b.Hc(1),b.Sb()),2&t){const t=b.ec().$implicit;b.Bb(1),b.Ic(t.nm_persons)}}const Gt=function(t,e){return{"btn-success":t,"btn-secondary":e}};function Vt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",27),b.Tb(1,"div",28),b.ac("click",function(){b.wc(t);const i=e.$implicit,n=b.ec().$implicit;return b.ec().setReserve(i,n)}),b.Tb(2,"span",29),b.Hc(3),b.Sb(),b.Fc(4,zt,1,0,"span",30),b.Fc(5,Lt,2,1,"span",31),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec().$implicit;b.Bb(1),b.lc("ngClass",b.qc(4,Gt,i.cd_tables.includes(t.nm_table),!i.cd_tables.includes(t.nm_table))),b.Bb(2),b.Ic(t.nm_table),b.Bb(1),b.lc("ngIf",i.cd_tables.includes(t.nm_table)),b.Bb(1),b.lc("ngIf",!i.cd_tables.includes(t.nm_table))}}function Zt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",16),b.Tb(1,"div",17),b.Tb(2,"div",18),b.Fc(3,Vt,6,7,"div",19),b.Sb(),b.Tb(4,"div",20),b.Tb(5,"button",21),b.Ob(6,"div",22),b.Tb(7,"mat-slide-toggle",23),b.ac("ngModelChange",function(e){return b.wc(t),b.ec().assignWithPriority=e}),b.Sb(),b.Sb(),b.Tb(8,"button",24),b.ac("click",function(){b.wc(t);const i=e.$implicit,n=b.ec();return n.assignTables(i,n.assignWithPriority)}),b.Ob(9,"div",25),b.Tb(10,"div",26),b.Hc(11,"Asingar"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec();b.Cb("colspan",i.displayedColumns.length),b.Bb(1),b.lc("@detailExpand",t==i.expandedElement?"expanded":"collapsed"),b.Bb(2),b.lc("ngForOf",i.tables),b.Bb(4),b.lc("ngModel",i.assignWithPriority)}}function Kt(t,e){1&t&&b.Ob(0,"tr",34)}function Xt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",35),b.ac("click",function(){b.wc(t);const i=e.$implicit,n=b.ec();return n.expandedElement=n.expandedElement===i?null:i}),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec();b.Fb("expanded-row",i.expandedElement===t)}}function Yt(t,e){1&t&&b.Ob(0,"tr",36)}const te=function(){return["expandedDetail"]};let ee=(()=>{class t{constructor(t,e){this.sharedService=t,this.waiterService=e,this.displayedColumns=["id_position","tx_persons","tx_status","tx_section"],this.assignWithPriority=!1,this.setReserve=(t,e)=>{e.cd_tables=e.cd_tables.includes(t.nm_table)?e.cd_tables.filter(e=>e!==t.nm_table):[...e.cd_tables,t.nm_table]},this.assignTables=(t,e)=>{this.waiterService.assignTables(t._id,t.cd_tables,e).subscribe(t=>{this.sharedService.snack(t.ok?"Las mesas fueron reservadas con exito!":"Error al reservar las mesas!",2e3)},()=>{this.sharedService.snack("Error al reservar las mesas!",2e3)})}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(m.a),b.Nb(u.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-requested"]],inputs:{requested:"requested",tables:"tables"},decls:24,vars:6,consts:[[1,"xl","mdi","mdi-alert","text-danger"],[1,"sidenav-title-text","mx-2"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","id_position"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","tx_persons"],["matColumnDef","tx_status"],["matColumnDef","tx_section"],["matColumnDef","expandedDetail"],["class","td-expanded px-0","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","tables-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-cell","",1,"td-expanded","px-0"],[1,"ticket-container"],[1,"ticket-status"],["class","col-4 px-0 p-1",4,"ngFor","ngForOf"],[1,"ticket-actions"],["mat-raised-button","","color","primary",1,"action-button","m-1"],[1,"mdi","mdi-priority-high","xl"],[3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",1,"action-button","m-1",3,"click"],[1,"mdi","mdi-hand-pointing-right","xl"],[1,"sm"],[1,"col-4","px-0","p-1"],[1,"btn","btn-block","p-0",3,"ngClass","click"],[1,"xl"],["class","xl mdi mdi-check-circle text-white",4,"ngIf"],["class","lg mdi mdi-human-male text-warning",4,"ngIf"],[1,"xl","mdi","mdi-check-circle","text-white"],[1,"lg","mdi","mdi-human-male","text-warning"],["mat-header-row",""],["mat-row","",1,"tables-row",3,"click"],["mat-row","",1,"detail-row"]],template:function(t,e){1&t&&(b.Tb(0,"mat-expansion-panel"),b.Tb(1,"mat-expansion-panel-header"),b.Tb(2,"mat-panel-title"),b.Ob(3,"span",0),b.Tb(4,"span",1),b.Hc(5),b.Sb(),b.Sb(),b.Sb(),b.Tb(6,"table",2),b.Rb(7,3),b.Fc(8,qt,2,0,"th",4),b.Fc(9,Et,3,1,"td",5),b.Qb(),b.Rb(10,6),b.Fc(11,Nt,2,0,"th",4),b.Fc(12,Jt,3,1,"td",5),b.Qb(),b.Rb(13,7),b.Fc(14,Ut,2,0,"th",4),b.Fc(15,Qt,3,1,"td",5),b.Qb(),b.Rb(16,8),b.Fc(17,At,2,0,"th",4),b.Fc(18,Wt,3,1,"td",5),b.Qb(),b.Rb(19,9),b.Fc(20,Zt,12,4,"td",10),b.Qb(),b.Fc(21,Kt,1,0,"tr",11),b.Fc(22,Xt,1,2,"tr",12),b.Fc(23,Yt,1,0,"tr",13),b.Sb(),b.Sb()),2&t&&(b.Bb(5),b.Jc("Mesas Requeridas (",e.requested.length,") "),b.Bb(1),b.lc("dataSource",e.requested),b.Bb(15),b.lc("matHeaderRowDef",e.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",e.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",b.oc(5,te)))},directives:[v.c,v.d,v.e,T.j,T.c,T.e,T.b,T.g,T.i,T.d,T.a,n.j,nt.a,ct.a,c.q,c.t,n.i,n.k,T.f,T.h],styles:[".row[_ngcontent-%COMP%]:hover{background-color:#ff4500}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background:#f5f5f5}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):active{background:#efefef}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.ticket-container[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-flow:wrap}.ticket-status[_ngcontent-%COMP%]{width:100%;padding:1.5em}.ticket-actions[_ngcontent-%COMP%]{justify-content:center;width:100%;display:flex;flex-flow:wrap}.action-button[_ngcontent-%COMP%]{width:80px;padding:0}button[_ngcontent-%COMP%]   div.mdi[_ngcontent-%COMP%]{opacity:.3}.tables-row[_ngcontent-%COMP%]:hover{background-color:rgba(120,20,120,.2);cursor:pointer}"],data:{animation:[Object(q.l)("detailExpand",[Object(q.i)("collapsed",Object(q.j)({height:"0px",minHeight:"0"})),Object(q.i)("expanded",Object(q.j)({height:"*"})),Object(q.k)("expanded <=> collapsed",Object(q.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();function ie(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Ticket # "),b.Sb())}function ne(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.id_position)}}function ce(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Personas "),b.Sb())}function se(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.nm_persons)}}function ae(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Estado "),b.Sb())}function le(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.tx_status)}}function oe(t,e){1&t&&(b.Tb(0,"th",14),b.Hc(1," Sector "),b.Sb())}function re(t,e){if(1&t&&(b.Tb(0,"td",15),b.Tb(1,"span"),b.Hc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Ic(t.id_section.tx_section)}}function be(t,e){1&t&&b.Ob(0,"span",32)}function de(t,e){if(1&t&&(b.Tb(0,"span",33),b.Hc(1),b.Sb()),2&t){const t=b.ec().$implicit;b.Bb(1),b.Ic(t.nm_persons)}}const ue=function(t,e){return{"btn-success":t,"btn-secondary":e}};function me(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",27),b.Tb(1,"div",28),b.ac("click",function(){b.wc(t);const i=e.$implicit,n=b.ec().$implicit;return b.ec().setReserve(i,n)}),b.Tb(2,"span",29),b.Hc(3),b.Sb(),b.Fc(4,be,1,0,"span",30),b.Fc(5,de,2,1,"span",31),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec().$implicit;b.Bb(1),b.lc("ngClass",b.qc(4,ue,i.cd_tables.includes(t.nm_table),!i.cd_tables.includes(t.nm_table))),b.Bb(2),b.Ic(t.nm_table),b.Bb(1),b.lc("ngIf",i.cd_tables.includes(t.nm_table)),b.Bb(1),b.lc("ngIf",!i.cd_tables.includes(t.nm_table))}}function fe(t,e){if(1&t){const t=b.Ub();b.Tb(0,"td",16),b.Tb(1,"div",17),b.Tb(2,"div",18),b.Fc(3,me,6,7,"div",19),b.Sb(),b.Tb(4,"div",20),b.Tb(5,"button",21),b.Ob(6,"div",22),b.Tb(7,"mat-slide-toggle",23),b.ac("ngModelChange",function(e){return b.wc(t),b.ec().assignWithPriority=e}),b.Sb(),b.Sb(),b.Tb(8,"button",24),b.ac("click",function(){b.wc(t);const i=e.$implicit,n=b.ec();return n.assignTables(i,n.assignWithPriority)}),b.Ob(9,"div",25),b.Tb(10,"div",26),b.Hc(11,"Asingar"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec();b.Cb("colspan",i.displayedColumns.length),b.Bb(1),b.lc("@detailExpand",t==i.expandedElement?"expanded":"collapsed"),b.Bb(2),b.lc("ngForOf",i.tables),b.Bb(4),b.lc("ngModel",i.assignWithPriority)}}function pe(t,e){1&t&&b.Ob(0,"tr",34)}function ge(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",35),b.ac("click",function(){b.wc(t);const i=e.$implicit,n=b.ec();return n.expandedElement=n.expandedElement===i?null:i}),b.Sb()}if(2&t){const t=e.$implicit,i=b.ec();b.Fb("expanded-row",i.expandedElement===t)}}function he(t,e){1&t&&b.Ob(0,"tr",36)}const Se=function(){return["expandedDetail"]};let ve=(()=>{class t{constructor(t,e){this.sharedService=t,this.waiterService=e,this.displayedColumns=["id_position","tx_persons","tx_status","tx_section"],this.setReserve=(t,e)=>{e.cd_tables=e.cd_tables.includes(t.nm_table)?e.cd_tables.filter(e=>e!==t.nm_table):[...e.cd_tables,t.nm_table]},this.assignTables=(t,e)=>{this.waiterService.assignTables(t._id,t.cd_tables,e).subscribe(t=>{this.sharedService.snack(t.ok?"Las mesas fueron reservadas con exito!":"Error al reservar las mesas!",2e3)},()=>{this.sharedService.snack("Error al reservar las mesas!",2e3)})}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(m.a),b.Nb(u.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-queued"]],inputs:{queued:"queued",tables:"tables"},decls:24,vars:6,consts:[[1,"xl","mdi","mdi-human-queue","text-primary"],[1,"sidenav-title-text","mx-2"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","id_position"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","tx_persons"],["matColumnDef","tx_status"],["matColumnDef","tx_section"],["matColumnDef","expandedDetail"],["class","td-expanded px-0","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","tables-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-cell","",1,"td-expanded","px-0"],[1,"ticket-container"],[1,"ticket-status"],["class","col-4 px-0 p-1",4,"ngFor","ngForOf"],[1,"ticket-actions"],["mat-raised-button","","color","primary",1,"action-button","m-1"],[1,"mdi","mdi-priority-high","xl"],[3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",1,"action-button","m-1",3,"click"],[1,"mdi","mdi-hand-pointing-right","xl"],[1,"sm"],[1,"col-4","px-0","p-1"],[1,"btn","btn-block","p-0",3,"ngClass","click"],[1,"xl"],["class","xl mdi mdi-check-circle text-white",4,"ngIf"],["class","lg mdi mdi-human-male text-warning",4,"ngIf"],[1,"xl","mdi","mdi-check-circle","text-white"],[1,"lg","mdi","mdi-human-male","text-warning"],["mat-header-row",""],["mat-row","",1,"tables-row",3,"click"],["mat-row","",1,"detail-row"]],template:function(t,e){1&t&&(b.Tb(0,"mat-expansion-panel"),b.Tb(1,"mat-expansion-panel-header"),b.Tb(2,"mat-panel-title"),b.Ob(3,"span",0),b.Tb(4,"span",1),b.Hc(5),b.Sb(),b.Sb(),b.Sb(),b.Tb(6,"table",2),b.Rb(7,3),b.Fc(8,ie,2,0,"th",4),b.Fc(9,ne,3,1,"td",5),b.Qb(),b.Rb(10,6),b.Fc(11,ce,2,0,"th",4),b.Fc(12,se,3,1,"td",5),b.Qb(),b.Rb(13,7),b.Fc(14,ae,2,0,"th",4),b.Fc(15,le,3,1,"td",5),b.Qb(),b.Rb(16,8),b.Fc(17,oe,2,0,"th",4),b.Fc(18,re,3,1,"td",5),b.Qb(),b.Rb(19,9),b.Fc(20,fe,12,4,"td",10),b.Qb(),b.Fc(21,pe,1,0,"tr",11),b.Fc(22,ge,1,2,"tr",12),b.Fc(23,he,1,0,"tr",13),b.Sb(),b.Sb()),2&t&&(b.Bb(5),b.Jc("Clientes Esperando (",e.queued.length,") "),b.Bb(1),b.lc("dataSource",e.queued),b.Bb(15),b.lc("matHeaderRowDef",e.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",e.displayedColumns),b.Bb(1),b.lc("matRowDefColumns",b.oc(5,Se)))},directives:[v.c,v.d,v.e,T.j,T.c,T.e,T.b,T.g,T.i,T.d,T.a,n.j,nt.a,ct.a,c.q,c.t,n.i,n.k,T.f,T.h],styles:[".row[_ngcontent-%COMP%]:hover{background-color:#ff4500}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background:#f5f5f5}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):active{background:#efefef}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.ticket-container[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-flow:wrap}.ticket-status[_ngcontent-%COMP%]{width:100%;padding:1.5em}.ticket-actions[_ngcontent-%COMP%]{justify-content:center;width:100%;display:flex;flex-flow:wrap}.action-button[_ngcontent-%COMP%]{width:80px;padding:0}button[_ngcontent-%COMP%]   div.mdi[_ngcontent-%COMP%]{opacity:.3}.tables-row[_ngcontent-%COMP%]:hover{background-color:rgba(120,20,120,.2);cursor:pointer}"],data:{animation:[Object(q.l)("detailExpand",[Object(q.i)("collapsed",Object(q.j)({height:"0px",minHeight:"0"})),Object(q.i)("expanded",Object(q.j)({height:"*"})),Object(q.k)("expanded <=> collapsed",Object(q.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();function _e(t,e){1&t&&(b.Tb(0,"div",4),b.Ob(1,"mat-spinner"),b.Sb())}function Te(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",5),b.Tb(1,"div",6),b.Hc(2),b.Sb(),b.Tb(3,"div",7),b.Tb(4,"button",8),b.ac("click",function(){return b.wc(t),b.ec(2).releaseSection()}),b.Tb(5,"table",9),b.Tb(6,"tr"),b.Tb(7,"td",10),b.Ob(8,"div",11),b.Sb(),b.Tb(9,"td"),b.Hc(10,"Salir"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(11,"div"),b.Tb(12,"mat-accordion",12),b.Ob(13,"app-sections",13),b.Ob(14,"app-tables",14),b.Ob(15,"app-requested",15),b.Ob(16,"app-queued",16),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec(2);b.Bb(2),b.Jc(" - SECTOR ",t.waiterService.session.id_section.tx_section," - "),b.Bb(11),b.lc("ticketsDataBySection",t.ticketsDataBySection)("tablesDataBySection",t.tablesDataBySection),b.Bb(1),b.lc("tables",t.tables)("busyTablesTimes",t.busyTablesTimes),b.Bb(1),b.lc("tables",t.tables)("requested",t.requested),b.Bb(1),b.lc("tables",t.tables)("queued",t.queued)}}function xe(t,e){if(1&t&&(b.Tb(0,"div",1),b.Fc(1,_e,2,0,"div",2),b.Fc(2,Te,17,9,"div",3),b.Sb()),2&t){const t=b.ec();b.Bb(1),b.lc("ngIf",t.loading),b.Bb(1),b.lc("ngIf",!t.loading)}}let we=(()=>{class t{constructor(t,e,i,n,c,s){this.loginService=t,this.waiterService=e,this.sharedService=i,this.wsService=n,this.router=c,this.intervalToHmsPipe=s,this.loading=!1,this.ticketsDataBySection=new Map,this.tablesDataBySection=new Map,this.busyTablesTimes=new Map,this.tickets=[],this.tables=[],this.requested=[],this.queued=[],this.subjectUpdateWaiters$=new o.a,this.readTables=()=>new Promise((t,e)=>{this.waiterService.readTables(this.loginService.user.id_company._id).subscribe(i=>{if(i.ok){this.tables=i.tables.filter(t=>t.id_section===this.waiterService.session.id_section._id);for(let t of this.waiterService.sections)this.tablesDataBySection.set(t.tx_section,{id:t._id,sectionselected:this.waiterService.session.id_section._id===t._id,busy:i.tables.filter(e=>e.id_section===t._id&&"busy"===e.tx_status).length,idle:i.tables.filter(e=>e.id_section===t._id&&"idle"===e.tx_status).length,paused:i.tables.filter(e=>e.id_section===t._id&&"paused"===e.tx_status).length});Object(r.a)(1e3).subscribe(()=>{for(let t of this.tables.filter(t=>{var e;return t.id_section===(null===(e=this.waiterService.session)||void 0===e?void 0:e.id_section._id)&&"busy"===t.tx_status}))t.id_session&&this.busyTablesTimes.set(t.nm_table,{tm_provided:this.intervalToHmsPipe.transform(t.id_session.id_ticket.tm_provided),tm_call:this.intervalToHmsPipe.transform(t.id_session.id_ticket.tm_call)})}),localStorage.setItem("tables",JSON.stringify(i.tables)),t()}else e([])},()=>{localStorage.getItem("tables")&&localStorage.removeItem("tables"),e([])})}),this.readTickets=()=>new Promise(t=>{var e;let i=null===(e=this.loginService.user.id_company)||void 0===e?void 0:e._id;return this.waiterService.readTickets(i).subscribe(e=>{this.tickets=e.tickets,this.requested=this.tickets.filter(t=>{var e;return(null===(e=t.id_section)||void 0===e?void 0:e._id)===this.waiterService.session.id_section._id&&null===t.tm_end&&"requested"===t.tx_status}),this.queued=this.tickets.filter(t=>{var e;return(null===(e=t.id_section)||void 0===e?void 0:e._id)===this.waiterService.session.id_section._id&&null===t.tm_end&&"queued"===t.tx_status});for(let t of this.waiterService.sections)this.ticketsDataBySection.set(t.tx_section,{id:t._id,sectionselected:this.waiterService.session.id_section._id===t._id,queued:e.tickets.filter(e=>{var i;return(null===(i=e.id_section)||void 0===i?void 0:i._id)===t._id&&null===e.tm_end&&("queued"===e.tx_status||"assigned"===e.tx_status)}).length,requested:e.tickets.filter(e=>{var i;return(null===(i=e.id_section)||void 0===i?void 0:i._id)===t._id&&null===e.tm_end&&"requested"===e.tx_status}).length});t(e.tickets),this.loading=!1})}),this.releaseSection=()=>{this.waiterService.releaseSection(this.waiterService.session.id_section._id,this.loginService.user._id).subscribe(t=>{t.ok&&(this.waiterService.clearSectionSession(),this.router.navigate(["waiter/home"]))})},this.ngOnDestroy=()=>{this.subjectUpdateWaiters$.complete()}}onClick(t){}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){this.waiterService.session?(this.loading=!0,yield this.readTables(),yield this.readTickets(),this.wsService.updateWaiters().subscribe(this.subjectUpdateWaiters$),this.subjectUpdateWaiters$.subscribe(()=>Object(l.a)(this,void 0,void 0,function*(){yield this.readTables(),yield this.readTickets()})),this.loading=!1):this.router.navigate(["/waiter/home"])})}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a),b.Nb(u.a),b.Nb(m.a),b.Nb(f.a),b.Nb(s.b),b.Nb(h))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-section"]],hostBindings:function(t,e){1&t&&b.ac("click",function(t){return e.onClick(t)})},decls:1,vars:1,consts:[["class","saturno-card animated fadeIn",4,"ngIf"],[1,"saturno-card","animated","fadeIn"],["class","mt-5 animated fadeIn",4,"ngIf"],["class","animated fadeIn",4,"ngIf"],[1,"mt-5","animated","fadeIn"],[1,"animated","fadeIn"],[1,"text-uppercase","lg","my-2","p-2"],[1,"my-4","mdi","mdi-"],[1,"btn","btn-danger","p-0","col-4",3,"click"],["width","100%"],[1,"rounded-left",2,"background-color","rgba(50, 50, 50, 0.3)"],[1,"mdi","mdi-power","xl"],["multi","true"],[3,"ticketsDataBySection","tablesDataBySection"],[3,"tables","busyTablesTimes"],[3,"tables","requested"],[3,"tables","queued"]],template:function(t,e){1&t&&b.Fc(0,xe,3,2,"div",0),2&t&&b.lc("ngIf",e.waiterService.session)},directives:[n.k,S.b,v.a,j,jt,ee,ve],styles:[".company-title[_ngcontent-%COMP%]{font-weight:300;letter-spacing:.2em;text-transform:uppercase;color:#f5f5f5}"]}),t})();var ke=i("zHaW"),ye=i("Q2Ze"),Oe=i("ZTz/"),Be=i("UhP/");function He(t,e){1&t&&(b.Tb(0,"div",4),b.Ob(1,"mat-spinner"),b.Sb())}function Ce(t,e){1&t&&(b.Tb(0,"div",17),b.Hc(1," No ten\xe9s ning\xfana empresa asignada a tu usuario. Por favor verifica que exista al menos una empresa creada y luego asignala a tu usuario desde el men\xfa principal. "),b.Ob(2,"hr"),b.Tb(3,"button",18),b.Ob(4,"span",19),b.Hc(5," IR AL ASISTENTE "),b.Sb(),b.Sb())}function Ie(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",22),b.Tb(2,"div",23),b.Hc(3),b.Sb(),b.Sb(),b.Tb(4,"div",22),b.Tb(5,"div",23),b.Tb(6,"button",24),b.ac("click",function(){b.wc(t);const e=b.ec(3);return e.takeSection(e.waiterService.session.id_section)}),b.Hc(7," Ingresar "),b.Sb(),b.Sb(),b.Tb(8,"div",23),b.Tb(9,"button",25),b.ac("click",function(){b.wc(t);const e=b.ec(3);return e.releaseSection(e.waiterService.session.id_section)}),b.Hc(10," Cerrar "),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec(3);b.Bb(3),b.Jc(" Ten\xe9s tomado el sector ",t.waiterService.session.id_section.tx_section," ")}}function Fe(t,e){if(1&t&&(b.Tb(0,"mat-option",32),b.Hc(1),b.Sb()),2&t){const t=e.$implicit;b.lc("value",t),b.Bb(1),b.Jc(" ",t.tx_section," ")}}function De(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",26),b.Tb(2,"mat-form-field",27),b.Tb(3,"mat-label"),b.Hc(4,"Seleccione un sector"),b.Sb(),b.Tb(5,"mat-select",28,29),b.Fc(7,Fe,2,2,"mat-option",30),b.Sb(),b.Sb(),b.Tb(8,"button",31),b.ac("click",function(){b.wc(t);const e=b.tc(6);return b.ec(3).takeSection(null==e?null:e.value)}),b.Hc(9," Ingresar "),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.ec(3);b.Bb(7),b.lc("ngForOf",t.sections)}}function Me(t,e){if(1&t&&(b.Tb(0,"div",20),b.Fc(1,Ie,11,1,"div",21),b.Fc(2,De,10,1,"div",21),b.Sb()),2&t){const t=b.ec(2);b.Bb(1),b.lc("ngIf",t.waiterService.session),b.Bb(1),b.lc("ngIf",!t.waiterService.session)}}function Pe(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td",33),b.Hc(2),b.Sb(),b.Tb(3,"td",34),b.Hc(4),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.ec(2);b.Bb(2),b.Jc(" ",t.tx_section," "),b.Bb(2),b.Jc(" ",i.sessions.get(t.tx_section)," ")}}function Re(t,e){if(1&t&&(b.Tb(0,"div",4),b.Tb(1,"div",5),b.Hc(2,"Bienvenido, desde ac\xe1 pod\xe9s entrar a un sector y comenzar a atender mesas."),b.Sb(),b.Fc(3,Ce,6,0,"div",6),b.Fc(4,Me,3,2,"div",7),b.Tb(5,"div",8),b.Tb(6,"div",9),b.Tb(7,"table",10),b.Tb(8,"tr",11),b.Tb(9,"td",12),b.Ob(10,"span",13),b.Hc(11," Sector "),b.Sb(),b.Tb(12,"td",14),b.Ob(13,"span",15),b.Hc(14," Camareros "),b.Sb(),b.Sb(),b.Fc(15,Pe,5,2,"tr",16),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.ec();b.Bb(3),b.lc("ngIf",!t.loginService.user.id_company),b.Bb(1),b.lc("ngIf",t.sections&&(null==t.loginService.user.id_company?null:t.loginService.user.id_company._id)),b.Bb(11),b.lc("ngForOf",t.sections)}}let $e=(()=>{class t{constructor(t,e,i,n,c){this.router=t,this.loginService=e,this.waiterService=i,this.sharedService=n,this.snack=c,this.loading=!1,this.sections=[],this.sessions=new Map}ngOnInit(){var t;if(this.loading=!0,!(null===(t=this.loginService.user.id_company)||void 0===t?void 0:t._id))return this.sharedService.snack("No tiene una empresa seleccionada",5e3),void(this.loading=!1);{let t=this.loginService.user.id_company._id;this.readSections(t),this.readSessions(t)}this.userSuscription=this.loginService.user$.subscribe(t=>{t&&this.readSections(t.id_company._id)})}takeSection(t){t&&(this.waiterService.session?this.router.navigate(["/waiter/section"]):this.waiterService.takeSection(t._id,this.loginService.user._id).subscribe(t=>{this.snack.open(t.msg,null,{duration:2e3}),t.ok?(this.waiterService.session=t.session,localStorage.setItem("session",JSON.stringify(t.session)),this.router.navigate(["/waiter/section"])):this.snack.open("No se pudo tomar un escritorio",null,{duration:2e3})},()=>{}))}readSections(t){this.waiterService.readSections(t).subscribe(t=>{t.ok?(this.sections=t.sections,this.waiterService.sections=this.sections):(delete this.sections,delete this.waiterService.sections)},()=>{this.loading=!1},()=>{this.loading=!1})}readSessions(t){this.waiterService.readSessions(t).subscribe(t=>{if(t.ok){let e=t.sessions.filter(t=>t.id_waiter===this.loginService.user._id);this.waiterService.session=e[0],localStorage.setItem("session",JSON.stringify(this.waiterService.session));for(let i of this.sections)this.sessions.set(i.tx_section,t.sessions.filter(t=>t.id_section.tx_section===i.tx_section).length)}else delete this.sessions},()=>{this.loading=!1},()=>{this.loading=!1})}releaseSection(t){this.loading=!0,this.waiterService.releaseSection(t._id,this.loginService.user._id).subscribe(t=>{t.ok&&(this.readSessions(this.loginService.user.id_company._id),this.waiterService.clearSectionSession())})}ngOnDestroy(){this.userSuscription&&this.userSuscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(s.b),b.Nb(d.a),b.Nb(u.a),b.Nb(m.a),b.Nb(ke.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-home"]],decls:6,vars:2,consts:[[1,"saturno-card","mt-sm-4","animated","fadeIn"],["class","animated fadeIn",4,"ngIf"],["routerLink","/waiter/dashboard","role","button",1,"btn","btn-primary","btn-block"],[1,"mdi","mdi-finance","mx-1"],[1,"animated","fadeIn"],[1,"md"],["class","p-3 my-4",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"card","bg-secondary","mb-4"],[1,"card-content","table-responsive-sm","p-2"],[1,"table","table-sm","text-white","text-center"],[2,"border-top","0px","color","yellow"],[2,"text-align","left","border","none"],[1,"mdi","mdi-select-group","mx-1"],[2,"text-align","right","border","none"],[1,"mdi","mdi-face","mx-1"],[4,"ngFor","ngForOf"],[1,"p-3","my-4"],["mat-raised-button","","color","accent","routerLink","/admin/wizard"],[1,"mdi","mdi-wizard-hat"],[1,"mb-4"],[4,"ngIf"],[1,"row","my-4"],[1,"col"],["role","button",1,"btn","btn-success","btn-block","text-uppercase",3,"click"],["role","button",1,"btn","btn-danger","btn-block","text-uppercase",3,"click"],[1,"my-4"],[1,"w-100"],["matNativeControl","","required",""],["selectSection",""],[3,"value",4,"ngFor","ngForOf"],["role","button",1,"btn","btn-success","btn-block",3,"click"],[3,"value"],[2,"text-align","left"],[2,"text-align","right"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Fc(1,He,2,0,"div",1),b.Fc(2,Re,16,3,"div",1),b.Tb(3,"button",2),b.Ob(4,"span",3),b.Hc(5," Dashboard "),b.Sb(),b.Sb()),2&t&&(b.Bb(1),b.lc("ngIf",e.loading),b.Bb(1),b.lc("ngIf",!e.loading))},directives:[n.k,s.c,S.b,n.j,nt.a,ye.c,ye.f,Oe.a,Be.l],styles:[""]}),t})();var je=i("cxbk"),qe=i("IheW");let Ee=(()=>{class t{constructor(t){this.http=t}getUserMetrics(t,e){return this.http.post(je.a.url+"/metrics/getusermetrics",{fcSel:t,idUser:e})}}return t.\u0275fac=function(e){return new(e||t)(b.Xb(qe.b))},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ne=i("e6WT"),Je=i("TN/R");let Ue=(()=>{class t{transform(t){return g()(t).format("H:mm:ss")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=b.Mb({name:"timeToHms",type:t,pure:!0}),t})();function Qe(t,e){1&t&&(b.Tb(0,"div",2),b.Ob(1,"mat-spinner"),b.Sb())}function Ae(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td",25),b.Hc(2),b.Sb(),b.Tb(3,"td",26),b.Hc(4),b.fc(5,"timeToHms"),b.Sb(),b.Tb(6,"td",26),b.Hc(7),b.fc(8,"intervalToHms"),b.Sb(),b.Tb(9,"td",26),b.Hc(10),b.fc(11,"timeToHms"),b.Sb(),b.Tb(12,"td",26),b.Hc(13),b.fc(14,"intervalToHms"),b.Sb(),b.Tb(15,"td",27),b.Hc(16),b.fc(17,"timeToHms"),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Jc(" ",t.id_position," "),b.Bb(2),b.Jc(" ",b.gc(5,6,t.tm_start)," "),b.Bb(3),b.Jc(" ",b.hc(8,8,t.tm_start,t.tm_att)," "),b.Bb(3),b.Jc(" ",b.gc(11,11,t.tm_att)," "),b.Bb(3),b.Jc(" ",b.hc(14,13,t.tm_att,t.tm_end)," "),b.Bb(3),b.Jc(" ",b.gc(17,16,t.tm_end)," ")}}function We(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",3),b.Tb(2,"div",4),b.Tb(3,"div",5),b.Tb(4,"mat-form-field",6),b.Tb(5,"mat-label"),b.Hc(6,"Angular forms"),b.Sb(),b.Tb(7,"input",7),b.ac("dateChange",function(e){return b.wc(t),b.ec().setDate(e)}),b.Sb(),b.Ob(8,"mat-datepicker-toggle",8),b.Ob(9,"mat-datepicker",null,9),b.Sb(),b.Sb(),b.Sb(),b.Tb(11,"div",10),b.Tb(12,"div",11),b.Tb(13,"div",12),b.Tb(14,"div",13),b.Hc(15,"Turnos"),b.Sb(),b.Tb(16,"div",14),b.Hc(17),b.Sb(),b.Sb(),b.Sb(),b.Tb(18,"div",11),b.Tb(19,"div",15),b.Tb(20,"div",13),b.Hc(21,"Evals"),b.Sb(),b.Tb(22,"div",14),b.Hc(23),b.Sb(),b.Sb(),b.Sb(),b.Tb(24,"div",11),b.Tb(25,"div",16),b.Tb(26,"div",13),b.Hc(27,"Score"),b.Sb(),b.Tb(28,"div",14),b.Hc(29),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(30,"div",4),b.Tb(31,"div",11),b.Tb(32,"div",17),b.Tb(33,"div",18),b.Tb(34,"table",19),b.Tb(35,"tr",20),b.Tb(36,"td",21),b.Hc(37,"Ticket"),b.Sb(),b.Tb(38,"td",22),b.Hc(39,"Start"),b.Sb(),b.Tb(40,"td",22),b.Hc(41," - "),b.Sb(),b.Tb(42,"td",22),b.Hc(43,"Atteneded"),b.Sb(),b.Tb(44,"td",22),b.Hc(45," - "),b.Sb(),b.Tb(46,"td",23),b.Hc(47,"End"),b.Sb(),b.Sb(),b.Fc(48,Ae,18,18,"tr",24),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.tc(10),e=b.ec();b.Bb(7),b.lc("matDatepicker",t)("value",e.date),b.Bb(1),b.lc("for",t),b.Bb(9),b.Jc(" ",e.metrics.tickets.length," "),b.Bb(6),b.Jc(" ",e.metrics.total," "),b.Bb(6),b.Jc(" ",e.metrics.avg," "),b.Bb(19),b.lc("ngForOf",e.metrics.tickets)}}let ze=(()=>{class t{constructor(t,e){this.MetricsService=t,this.loginService=e,this.loading=!1,this.metrics={total:0,avg:0,tickets:[]},this.date=new Date}ngOnInit(){let t=(new Date).setHours(0,0,0,0);this.getMetrics(t)}setDate(t){let e=+new Date(t.value);this.date=new Date(e),this.getMetrics(e)}getMetrics(t){this.loading=!0,this.MetricsService.getUserMetrics(t,this.loginService.user._id).subscribe(t=>{this.metrics=t.metric,this.loading=!1},()=>{this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(Ee),b.Nb(d.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[["class","mt-5 animated fadeIn",4,"ngIf"],[4,"ngIf"],[1,"mt-5","animated","fadeIn"],[1,"saturno-card"],[1,"row"],[1,"col","w-100"],[1,"w-100"],["matInput","",3,"matDatepicker","value","dateChange"],["matSuffix","",3,"for"],["picker1",""],[1,"row","mb-4"],[1,"col"],[1,"card","text-white","bg-success"],[1,"card-header"],[1,"card-body","saturno-card-mini-body"],[1,"card","text-white","bg-danger"],[1,"card","text-white","bg-primary"],[1,"card","bg-secondary","mb-4"],[1,"card-content","table-responsive-sm","p-2"],[1,"table","table-sm","text-white","text-center",2,"font-size","x-small"],[2,"border-top","0px","color","yellow"],[2,"text-align","left","border","none"],[2,"text-align","center","border","none"],[2,"text-align","right","border","none"],[4,"ngFor","ngForOf"],[2,"text-align","left"],[2,"text-align","center"],[2,"text-align","right"]],template:function(t,e){1&t&&(b.Fc(0,Qe,2,0,"div",0),b.Fc(1,We,49,7,"div",1)),2&t&&(b.lc("ngIf",e.loading),b.Bb(1),b.lc("ngIf",!e.loading&&e.metrics))},directives:[n.k,S.b,ye.c,ye.f,Ne.b,Je.b,Je.d,ye.g,Je.a,n.j],pipes:[Ue,h],styles:[""]}),t})();var Le=i("PDjf"),Ge=i("wDwh");const Ve=[{path:"home",component:$e},{path:"profile",component:(()=>{class t{constructor(t){this.loginService=t,this.header={icon:"mdi mdi-face",title:"Subi el tu foto de perfil",subtitle:"Esta imagen es para reconocer tu cuenta, es privada y no se muestra a nadie mas."}}ngOnInit(){}dataUpdated(t){this.loginService.pushUser(this.loginService.user)}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(d.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-profile"]],decls:10,vars:4,consts:[[1,"saturno-card","animated","fadeIn"],["idField","tx_img",3,"editable","multi","data","idDocument","dataUpdated"],[1,"mx-2"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"mat-card"),b.Tb(2,"mat-card-header"),b.Tb(3,"app-uploader",1),b.ac("dataUpdated",function(t){return e.dataUpdated(t)}),b.Sb(),b.Tb(4,"div",2),b.Tb(5,"mat-card-title"),b.Hc(6," Mi Perfil "),b.Sb(),b.Tb(7,"mat-card-subtitle"),b.Hc(8," Edita ac\xe1 tu perfil"),b.Sb(),b.Sb(),b.Sb(),b.Ob(9,"mat-card-content"),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.lc("editable",!e.loginService.user.bl_google)("multi",!1)("data",e.loginService.user)("idDocument",e.loginService.user._id))},directives:[Le.a,Le.e,Ge.a,Le.h,Le.g,Le.d],styles:[""]}),t})()},{path:"section",component:we},{path:"dashboard",component:ze},{path:"",redirectTo:"/waiter/home",pathMatch:"full"},{path:"**",component:a.a}];let Ze=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(Ve)],s.e]}),t})();var Ke=i("1+r1"),Xe=i("iTUp"),Ye=i("j1ZV");let ti=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[c.k,n.b,Ye.a,Ke.a,Xe.a,Ze]]}),t})()}}]);