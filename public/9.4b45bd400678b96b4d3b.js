(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+E7R":function(e,t,i){"use strict";i.r(t),i.d(t,"SuperuserModule",(function(){return E}));var n=i("SVse"),r=i("iInd"),c=i("AIE+"),s=i("8Y7J"),u=i("IheW"),o=i("AytR"),a=i("EFyh");let d=(()=>{class e{constructor(e,t){this.http=e,this.loginService=t}createMenu(e){const t=new u.c({"turnos-token":this.loginService.token});return this.http.post(o.a.url+"/su/createmenu",e,{headers:t})}readMenus(){const e=new u.c({"turnos-token":this.loginService.token});return this.http.get(o.a.url+"/su/readmenu/",{headers:e})}updateMenu(e){const t=new u.c({"turnos-token":this.loginService.token});return this.http.post(o.a.url+"/su/updatemenu",e,{headers:t})}deleteMenu(e){const t=new u.c({"turnos-token":this.loginService.token});return this.http.delete(o.a.url+"/su/deletemenu/"+e,{headers:t})}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(u.a),s.Xb(a.a))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i("zuHl"),m=i("Q2Ze"),b=i("ZTz/"),p=i("s7LF"),h=i("LRne"),S=i("e6WT");function f(e,t){1&e&&(s.Tb(0,"button",13),s.yc(1," Crear Menu "),s.Sb())}function v(e,t){if(1&e&&(s.Tb(0,"div",10),s.Tb(1,"div",11),s.xc(2,f,2,0,"button",12),s.Sb(),s.Sb()),2&e){const e=s.ec();s.Ab(2),s.kc("ngIf",!e.itemEdit)}}function g(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",14),s.Tb(1,"div",15),s.Tb(2,"button",16),s.yc(3," Guardar "),s.Sb(),s.Sb(),s.Tb(4,"div",11),s.Tb(5,"button",17),s.ac("click",(function(){s.rc(e);const t=s.ec(),i=s.qc(1);return t.resetForm(i)})),s.yc(6," Limpiar "),s.Sb(),s.Sb(),s.Sb()}}let _=(()=>{class e{constructor(e,t,i){this.loginService=e,this.sharedService=t,this.superuserService=i,this.itemUpdated=new s.n,this.manejaError=e=>Object(h.a)(e)}ngOnInit(){this.menuForm=new p.g({id_parent:new p.e(null,p.u.required),cd_role:new p.e(null,p.u.required),cd_pricing:new p.e(null,p.u.required),tx_titulo:new p.e(null,p.u.required),tx_icon:new p.e(null,p.u.required),tx_url:new p.e(null,p.u.required)})}ngOnChanges(e){var t,i;e.idMenuSelected&&(null===(t=this.menuForm)||void 0===t||t.patchValue({id_parent:this.idMenuSelected})),e.itemEdit&&(null===(i=this.menuForm)||void 0===i||i.patchValue({cd_role:e.itemEdit.currentValue.cd_role,cd_pricing:e.itemEdit.currentValue.cd_pricing,tx_titulo:e.itemEdit.currentValue.tx_titulo,tx_icon:e.itemEdit.currentValue.tx_icon,tx_url:e.itemEdit.currentValue.tx_url}))}createMenu(e){var t;if(null===(t=this.menuForm)||void 0===t||t.patchValue({id_parent:this.idMenuSelected}),this.menuForm.invalid)return void this.sharedService.snackShow("Formulario invalido",2e3);const i={id_parent:this.menuForm.value.id_parent,cd_role:this.menuForm.value.cd_role,cd_pricing:this.menuForm.value.cd_pricing,tx_titulo:this.menuForm.value.tx_titulo,tx_icon:this.menuForm.value.tx_icon,tx_url:this.menuForm.value.tx_url};this.itemEdit?(i._id=this.itemEdit._id,this.superuserService.updateMenu(i).subscribe(t=>{t.ok&&(this.itemUpdated.emit(t.menuitem),this.sharedService.snackShow(t.msg,5e3),this.resetForm(e))},e=>{this.sharedService.snackShow(e.error.msg,5e3)})):this.superuserService.createMenu(i).subscribe(t=>{this.itemUpdated.emit(t.menuitem),this.sharedService.snackShow(t.msg,5e3),this.resetForm(e),e.resetForm()},e=>{this.sharedService.snackShow(e.error.msg,5e3)})}resetForm(e){this.itemEdit=null,this.menuForm.enable(),this.menuForm.reset(),e.resetForm(),this.sharedService.scrollTop()}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(a.a),s.Nb(l.a),s.Nb(d))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-menu-create-form"]],inputs:{idMenuSelected:"idMenuSelected",itemEdit:"itemEdit"},outputs:{itemUpdated:"itemUpdated"},features:[s.yb],decls:24,vars:3,consts:[["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["color","warn",1,"w-100"],["matInput","","placeholder","0","formControlName","cd_role","name","cd_role","type","text","required",""],["matInput","","placeholder","0","formControlName","cd_pricing","name","cd_pricing","type","text","required",""],["matInput","","placeholder","Titulo","formControlName","tx_titulo","name","tx_titulo","type","text","required",""],["matInput","","placeholder","mdi mdi-icon","formControlName","tx_icon","name","tx_icon","type","text","required",""],["matInput","","placeholder","/assistant/home","formControlName","tx_url","name","tx_url","type","text","required",""],["class","row text-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","text-center"],[1,"col"],["class","btn btn-success btn-block text-uppercase","type","submit",4,"ngIf"],["type","submit",1,"btn","btn-success","btn-block","text-uppercase"],[1,"row"],[1,"col","w-100"],["type","submit",1,"btn","btn-danger","btn-block","text-uppercase"],[1,"btn","btn-warning","btn-block","text-uppercase",3,"click"]],template:function(e,t){if(1&e){const e=s.Ub();s.Tb(0,"form",0,1),s.ac("ngSubmit",(function(){s.rc(e);const i=s.qc(1);return t.createMenu(i)})),s.Tb(2,"mat-form-field",2),s.Tb(3,"mat-label"),s.yc(4,"C\xf3digo de Rol"),s.Sb(),s.Ob(5,"input",3),s.Sb(),s.Tb(6,"mat-form-field",2),s.Tb(7,"mat-label"),s.yc(8,"C\xf3digo de Pricing"),s.Sb(),s.Ob(9,"input",4),s.Sb(),s.Tb(10,"mat-form-field",2),s.Tb(11,"mat-label"),s.yc(12,"Titulo"),s.Sb(),s.Ob(13,"input",5),s.Sb(),s.Tb(14,"mat-form-field",2),s.Tb(15,"mat-label"),s.yc(16,"Icono"),s.Sb(),s.Ob(17,"input",6),s.Sb(),s.Tb(18,"mat-form-field",2),s.Tb(19,"mat-label"),s.yc(20,"URL"),s.Sb(),s.Ob(21,"input",7),s.Sb(),s.xc(22,v,3,1,"div",8),s.xc(23,g,7,0,"div",9),s.Sb()}2&e&&(s.kc("formGroup",t.menuForm),s.Ab(22),s.kc("ngIf",!t.itemEdit),s.Ab(1),s.kc("ngIf",t.itemEdit))},directives:[p.p,p.h,m.c,m.f,S.b,p.d,p.o,p.f,p.t,n.j],styles:[""]}),e})();var x=i("UhP/");function I(e,t){if(1&e){const e=s.Ub();s.Tb(0,"mat-option",15),s.ac("click",(function(){s.rc(e);const i=t.$implicit;return s.ec().getSubItems(i._id)})),s.Tb(1,"span"),s.Tb(2,"span",16),s.yc(3),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=t.$implicit;s.kc("value",e._id),s.Ab(1),s.Db("",e.tx_icon," text-secondary"),s.Ab(2),s.zc(e.tx_titulo)}}function w(e,t){if(1&e){const e=s.Ub();s.Tb(0,"tr"),s.Ob(1,"td",20),s.Tb(2,"td"),s.yc(3),s.Sb(),s.Tb(4,"td",21),s.Tb(5,"span",22),s.ac("click",(function(){s.rc(e);const i=t.$implicit;return s.ec(2).editMenuItem(i)})),s.Sb(),s.Tb(6,"span",23),s.ac("click",(function(){s.rc(e);const i=t.$implicit;return s.ec(2).deleteMenuItem(i._id)})),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=t.$implicit;s.Ab(1),s.Cb(null==e?null:e.tx_icon),s.Ab(2),s.Ac("",null==e?null:e.tx_titulo," ")}}function y(e,t){if(1&e&&(s.Tb(0,"div",17),s.Tb(1,"table",18),s.xc(2,w,7,4,"tr",19),s.Sb(),s.yc(3," mdi-shield-star "),s.Sb()),2&e){const e=s.ec();s.Ab(2),s.kc("ngForOf",e.submenuItems)}}let T=(()=>{class e{constructor(e,t){this.superuserService=e,this.sharedService=t,this.allItems=[],this.menuItems=[]}ngOnInit(){this.readMenus()}editMenuItem(e){this.itemEdit=e}menuItemUpdated(e){let t=this.submenuItems.findIndex(t=>t._id===e._id);t>0?this.submenuItems[t]=e:this.submenuItems.push(e)}readMenus(){this.superuserService.readMenus().subscribe(e=>{this.allItems=e.menuitem,this.menuItems=e.menuitem.filter(e=>null===e.id_parent)})}deleteMenuItem(e){this.sharedService.snackShow("Desea eliminar el menu?",5e3,"ELIMINAR").then(t=>{t&&this.superuserService.deleteMenu(e).subscribe(t=>{this.sharedService.snackShow(t.msg,5e3),this.submenuItems=this.submenuItems.filter(t=>t._id!=e)},e=>{this.sharedService.snackShow(e.msg,5e3)})}).catch(()=>{})}getSubItems(e){this.idMenuSelected=e,this.submenuItems=this.allItems.filter(t=>t.id_parent===e)}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(d),s.Nb(l.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-menu"]],decls:20,vars:4,consts:[[1,"animated","saturno-card","fadeIn"],[1,"card","bg-secondary","p-2","text-white"],[1,"card-header"],[1,"mdi","mdi-menu-open"],[1,"card-body","bg-light","rounded"],["color","warn",1,"w-100","bg-light"],["matNativeControl","","required",""],["selectDesktop",""],[3,"value","click",4,"ngFor","ngForOf"],["class","card-body table-responsive-sm bg-secondary rounded",4,"ngIf"],[1,"my-4"],[1,"card"],[1,"mdi","mdi-plus-circle-outline"],[1,"card-body"],[3,"itemEdit","idMenuSelected","itemUpdated"],[3,"value","click"],[1,"mx-2"],[1,"card-body","table-responsive-sm","bg-secondary","rounded"],[1,"w-100"],[4,"ngFor","ngForOf"],[2,"color","gold"],[2,"text-align","right"],[1,"mdi","mdi-pencil","ml-2","list-crud-edit",3,"click"],[1,"mdi","mdi-delete","ml-2","list-crud-delete",3,"click"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Ob(3,"span",3),s.yc(4," Menus "),s.Sb(),s.Tb(5,"div",4),s.Tb(6,"mat-form-field",5),s.Tb(7,"mat-label"),s.yc(8,"Seleccione el men\xfa"),s.Sb(),s.Tb(9,"mat-select",6,7),s.xc(11,I,4,5,"mat-option",8),s.Sb(),s.Sb(),s.xc(12,y,4,1,"div",9),s.Sb(),s.Sb(),s.Ob(13,"div",10),s.Tb(14,"div",11),s.Tb(15,"div",2),s.Ob(16,"span",12),s.yc(17," Crear Men\xfa "),s.Sb(),s.Tb(18,"div",13),s.Tb(19,"app-menu-create-form",14),s.ac("itemUpdated",(function(e){return t.menuItemUpdated(e)})),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(11),s.kc("ngForOf",t.menuItems),s.Ab(1),s.kc("ngIf",t.submenuItems),s.Ab(7),s.kc("itemEdit",t.itemEdit)("idMenuSelected",t.idMenuSelected))},directives:[m.c,m.f,b.a,n.i,n.j,_,x.l],styles:[""]}),e})();const k=[{path:"home",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["app-home"]],decls:2,vars:0,template:function(e,t){1&e&&(s.Tb(0,"p"),s.yc(1,"home works!"),s.Sb())},styles:[""]}),e})()},{path:"menu",component:T},{path:"**",component:c.a}];let F=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(k)],r.e]}),e})();var M=i("1+r1");let E=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[n.b,F,p.s,p.i,M.a]]}),e})()}}]);