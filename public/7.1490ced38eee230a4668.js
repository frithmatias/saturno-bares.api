(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+E7R":function(e,t,i){"use strict";i.r(t),i.d(t,"SuperuserModule",function(){return C});var n=i("SVse"),r=i("iInd"),c=i("AIE+"),u=i("8Y7J"),s=i("AytR"),o=i("IheW");let a=(()=>{class e{constructor(e){this.http=e}createMenu(e){return this.http.post(s.a.url+"/superuser/createmenu",e)}readMenus(){return this.http.get(s.a.url+"/superuser/readmenu/")}updateMenu(e){return this.http.post(s.a.url+"/superuser/updatemenu",e)}deleteMenu(e){return this.http.delete(s.a.url+"/superuser/deletemenu/"+e)}}return e.\u0275fac=function(t){return new(t||e)(u.Xb(o.b))},e.\u0275prov=u.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=i("zuHl"),l=i("Q2Ze"),m=i("ZTz/"),b=i("s7LF"),p=i("LRne"),h=i("EFyh"),f=i("e6WT");function S(e,t){1&e&&(u.Tb(0,"button",13),u.Cc(1," Crear Menu "),u.Sb())}function v(e,t){if(1&e&&(u.Tb(0,"div",10),u.Tb(1,"div",11),u.Bc(2,S,2,0,"button",12),u.Sb(),u.Sb()),2&e){const e=u.ec();u.Bb(2),u.kc("ngIf",!e.itemEdit)}}function g(e,t){if(1&e){const e=u.Ub();u.Tb(0,"div",14),u.Tb(1,"div",15),u.Tb(2,"button",16),u.Cc(3," Guardar "),u.Sb(),u.Sb(),u.Tb(4,"div",11),u.Tb(5,"button",17),u.ac("click",function(){u.tc(e);const t=u.ec(),i=u.sc(1);return t.resetForm(i)}),u.Cc(6," Limpiar "),u.Sb(),u.Sb(),u.Sb()}}let _=(()=>{class e{constructor(e,t,i){this.loginService=e,this.sharedService=t,this.superuserService=i,this.itemUpdated=new u.o,this.manejaError=e=>Object(p.a)(e)}ngOnInit(){this.menuForm=new b.i({id_parent:new b.f(null,b.w.required),cd_role:new b.f(null,b.w.required),cd_pricing:new b.f(null,b.w.required),tx_titulo:new b.f(null,b.w.required),tx_icon:new b.f(null,b.w.required),tx_url:new b.f(null,b.w.required)})}ngOnChanges(e){var t,i;e.idMenuSelected&&(null===(t=this.menuForm)||void 0===t||t.patchValue({id_parent:this.idMenuSelected})),e.itemEdit&&(null===(i=this.menuForm)||void 0===i||i.patchValue({cd_role:e.itemEdit.currentValue.cd_role,cd_pricing:e.itemEdit.currentValue.cd_pricing,tx_titulo:e.itemEdit.currentValue.tx_titulo,tx_icon:e.itemEdit.currentValue.tx_icon,tx_url:e.itemEdit.currentValue.tx_url}))}createMenu(e){var t;if(null===(t=this.menuForm)||void 0===t||t.patchValue({id_parent:this.idMenuSelected}),this.menuForm.invalid)return void this.sharedService.snack("Formulario invalido",2e3);const i={id_parent:this.menuForm.value.id_parent,cd_role:this.menuForm.value.cd_role,cd_pricing:this.menuForm.value.cd_pricing,tx_titulo:this.menuForm.value.tx_titulo,tx_icon:this.menuForm.value.tx_icon,tx_url:this.menuForm.value.tx_url};this.itemEdit?(i._id=this.itemEdit._id,this.superuserService.updateMenu(i).subscribe(t=>{t.ok&&(this.itemUpdated.emit(t.menuitem),this.sharedService.snack(t.msg,5e3),this.resetForm(e))},e=>{this.sharedService.snack(e.error.msg,5e3)})):this.superuserService.createMenu(i).subscribe(t=>{this.itemUpdated.emit(t.menuitem),this.sharedService.snack(t.msg,5e3),this.resetForm(e),e.resetForm()},e=>{this.sharedService.snack(e.error.msg,5e3)})}resetForm(e){this.itemEdit=null,this.menuForm.enable(),this.menuForm.reset(),e.resetForm(),this.sharedService.scrollTop()}}return e.\u0275fac=function(t){return new(t||e)(u.Nb(h.a),u.Nb(d.a),u.Nb(a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-menu-create-form"]],inputs:{idMenuSelected:"idMenuSelected",itemEdit:"itemEdit"},outputs:{itemUpdated:"itemUpdated"},features:[u.zb],decls:24,vars:3,consts:[["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["color","warn",1,"w-100"],["matInput","","placeholder","0","formControlName","cd_role","name","cd_role","type","text","required",""],["matInput","","placeholder","0","formControlName","cd_pricing","name","cd_pricing","type","text","required",""],["matInput","","placeholder","Titulo","formControlName","tx_titulo","name","tx_titulo","type","text","required",""],["matInput","","placeholder","mdi mdi-icon","formControlName","tx_icon","name","tx_icon","type","text","required",""],["matInput","","placeholder","/waiter/home","formControlName","tx_url","name","tx_url","type","text","required",""],["class","row text-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","text-center"],[1,"col"],["class","btn btn-success btn-block text-uppercase","type","submit",4,"ngIf"],["type","submit",1,"btn","btn-success","btn-block","text-uppercase"],[1,"row"],[1,"col","w-100"],["type","submit",1,"btn","btn-danger","btn-block","text-uppercase"],[1,"btn","btn-warning","btn-block","text-uppercase",3,"click"]],template:function(e,t){if(1&e){const e=u.Ub();u.Tb(0,"form",0,1),u.ac("ngSubmit",function(){u.tc(e);const i=u.sc(1);return t.createMenu(i)}),u.Tb(2,"mat-form-field",2),u.Tb(3,"mat-label"),u.Cc(4,"C\xf3digo de Rol"),u.Sb(),u.Ob(5,"input",3),u.Sb(),u.Tb(6,"mat-form-field",2),u.Tb(7,"mat-label"),u.Cc(8,"C\xf3digo de Pricing"),u.Sb(),u.Ob(9,"input",4),u.Sb(),u.Tb(10,"mat-form-field",2),u.Tb(11,"mat-label"),u.Cc(12,"Titulo"),u.Sb(),u.Ob(13,"input",5),u.Sb(),u.Tb(14,"mat-form-field",2),u.Tb(15,"mat-label"),u.Cc(16,"Icono"),u.Sb(),u.Ob(17,"input",6),u.Sb(),u.Tb(18,"mat-form-field",2),u.Tb(19,"mat-label"),u.Cc(20,"URL"),u.Sb(),u.Ob(21,"input",7),u.Sb(),u.Bc(22,v,3,1,"div",8),u.Bc(23,g,7,0,"div",9),u.Sb()}2&e&&(u.kc("formGroup",t.menuForm),u.Bb(22),u.kc("ngIf",!t.itemEdit),u.Bb(1),u.kc("ngIf",t.itemEdit))},directives:[b.q,b.j,l.c,l.f,f.b,b.d,b.p,b.h,b.v,n.j],styles:[""]}),e})();var I=i("UhP/");function T(e,t){if(1&e){const e=u.Ub();u.Tb(0,"mat-option",15),u.ac("click",function(){u.tc(e);const i=t.$implicit;return u.ec().getSubItems(i._id)}),u.Tb(1,"span"),u.Tb(2,"span",16),u.Cc(3),u.Sb(),u.Sb(),u.Sb()}if(2&e){const e=t.$implicit;u.kc("value",e._id),u.Bb(1),u.Eb("",e.tx_icon," text-secondary"),u.Bb(2),u.Dc(e.tx_titulo)}}function x(e,t){if(1&e){const e=u.Ub();u.Tb(0,"tr"),u.Ob(1,"td",20),u.Tb(2,"td"),u.Cc(3),u.Sb(),u.Tb(4,"td",21),u.Tb(5,"span",22),u.ac("click",function(){u.tc(e);const i=t.$implicit;return u.ec(2).editMenuItem(i)}),u.Sb(),u.Tb(6,"span",23),u.ac("click",function(){u.tc(e);const i=t.$implicit;return u.ec(2).deleteMenuItem(i._id)}),u.Sb(),u.Sb(),u.Sb()}if(2&e){const e=t.$implicit;u.Bb(1),u.Db(null==e?null:e.tx_icon),u.Bb(2),u.Ec("",null==e?null:e.tx_titulo," ")}}function w(e,t){if(1&e&&(u.Tb(0,"div",17),u.Tb(1,"table",18),u.Bc(2,x,7,4,"tr",19),u.Sb(),u.Sb()),2&e){const e=u.ec();u.Bb(2),u.kc("ngForOf",e.submenuItems)}}let k=(()=>{class e{constructor(e,t){this.superuserService=e,this.sharedService=t,this.allItems=[],this.menuItems=[]}ngOnInit(){this.readMenus()}editMenuItem(e){this.itemEdit=e}menuItemUpdated(e){let t=this.submenuItems.findIndex(t=>t._id===e._id);t>0?this.submenuItems[t]=e:this.submenuItems.push(e)}readMenus(){this.superuserService.readMenus().subscribe(e=>{this.allItems=e.menuitem,this.menuItems=e.menuitem.filter(e=>null===e.id_parent)})}deleteMenuItem(e){this.sharedService.snack("Desea eliminar el menu?",5e3,"ELIMINAR").then(t=>{t&&this.superuserService.deleteMenu(e).subscribe(t=>{this.sharedService.snack(t.msg,5e3),this.submenuItems=this.submenuItems.filter(t=>t._id!=e)},e=>{this.sharedService.snack(e.msg,5e3)})}).catch(()=>{})}getSubItems(e){this.idMenuSelected=e,this.submenuItems=this.allItems.filter(t=>t.id_parent===e)}}return e.\u0275fac=function(t){return new(t||e)(u.Nb(a),u.Nb(d.a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-menu"]],decls:20,vars:4,consts:[[1,"saturno-card","animated","fadeIn"],[1,"card","bg-secondary","p-2","text-white"],[1,"card-header"],[1,"mdi","mdi-menu-open"],[1,"card-body","bg-light","rounded"],["color","warn",1,"w-100","bg-light"],["matNativeControl","","required",""],["selectTable",""],[3,"value","click",4,"ngFor","ngForOf"],["class","card-body table-responsive-sm bg-secondary rounded",4,"ngIf"],[1,"my-4"],[1,"card"],[1,"mdi","mdi-plus-circle-outline"],[1,"card-body"],[3,"itemEdit","idMenuSelected","itemUpdated"],[3,"value","click"],[1,"mx-2"],[1,"card-body","table-responsive-sm","bg-secondary","rounded"],[1,"w-100"],[4,"ngFor","ngForOf"],[2,"color","gold"],[2,"text-align","right"],[1,"mdi","mdi-pencil","ml-2","text-success","pointer",3,"click"],[1,"mdi","mdi-delete","ml-2","text-danger","pointer",3,"click"]],template:function(e,t){1&e&&(u.Tb(0,"div",0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Ob(3,"span",3),u.Cc(4," Menus "),u.Sb(),u.Tb(5,"div",4),u.Tb(6,"mat-form-field",5),u.Tb(7,"mat-label"),u.Cc(8,"Seleccione el men\xfa"),u.Sb(),u.Tb(9,"mat-select",6,7),u.Bc(11,T,4,5,"mat-option",8),u.Sb(),u.Sb(),u.Bc(12,w,3,1,"div",9),u.Sb(),u.Sb(),u.Ob(13,"div",10),u.Tb(14,"div",11),u.Tb(15,"div",2),u.Ob(16,"span",12),u.Cc(17," Crear Men\xfa "),u.Sb(),u.Tb(18,"div",13),u.Tb(19,"app-menu-create-form",14),u.ac("itemUpdated",function(e){return t.menuItemUpdated(e)}),u.Sb(),u.Sb(),u.Sb(),u.Sb()),2&e&&(u.Bb(11),u.kc("ngForOf",t.menuItems),u.Bb(1),u.kc("ngIf",t.submenuItems),u.Bb(7),u.kc("itemEdit",t.itemEdit)("idMenuSelected",t.idMenuSelected))},directives:[l.c,l.f,m.a,n.i,n.j,_,I.l],styles:[""]}),e})();const y=[{path:"home",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Hb({type:e,selectors:[["app-home"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Tb(0,"p"),u.Cc(1,"home works!"),u.Sb())},styles:[""]}),e})()},{path:"menu",component:k},{path:"**",component:c.a}];let F=(()=>{class e{}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(y)],r.e]}),e})();var M=i("1+r1");let C=(()=>{class e{}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(t){return new(t||e)},imports:[[n.b,F,b.u,b.k,M.a]]}),e})()}}]);