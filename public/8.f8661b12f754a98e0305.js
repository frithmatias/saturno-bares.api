(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+E7R":function(e,t,i){"use strict";i.r(t),i.d(t,"SuperuserModule",function(){return E});var n=i("SVse"),r=i("iInd"),c=i("AIE+"),u=i("8Y7J"),s=i("AytR"),o=i("IheW");let d=(()=>{class e{constructor(e){this.http=e}createMenu(e){return this.http.post(s.a.url+"/superuser/createmenu",e)}readMenus(){return this.http.get(s.a.url+"/superuser/readmenu/")}updateMenu(e){return this.http.post(s.a.url+"/superuser/updatemenu",e)}deleteMenu(e){return this.http.delete(s.a.url+"/superuser/deletemenu/"+e)}}return e.\u0275fac=function(t){return new(t||e)(u.Wb(o.b))},e.\u0275prov=u.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var a=i("zuHl"),l=i("Q2Ze"),m=i("ZTz/"),b=i("s7LF"),p=i("LRne"),h=i("EFyh"),f=i("e6WT");function S(e,t){1&e&&(u.Sb(0,"button",13),u.Bc(1," Crear Menu "),u.Rb())}function v(e,t){if(1&e&&(u.Sb(0,"div",10),u.Sb(1,"div",11),u.Ac(2,S,2,0,"button",12),u.Rb(),u.Rb()),2&e){const e=u.dc();u.Ab(2),u.jc("ngIf",!e.itemEdit)}}function g(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",14),u.Sb(1,"div",15),u.Sb(2,"button",16),u.Bc(3," Guardar "),u.Rb(),u.Rb(),u.Sb(4,"div",11),u.Sb(5,"button",17),u.Zb("click",function(){u.sc(e);const t=u.dc(),i=u.rc(1);return t.resetForm(i)}),u.Bc(6," Limpiar "),u.Rb(),u.Rb(),u.Rb()}}let _=(()=>{class e{constructor(e,t,i){this.loginService=e,this.sharedService=t,this.superuserService=i,this.itemUpdated=new u.n,this.manejaError=e=>Object(p.a)(e)}ngOnInit(){this.menuForm=new b.h({id_parent:new b.f(null,b.v.required),cd_role:new b.f(null,b.v.required),cd_pricing:new b.f(null,b.v.required),tx_titulo:new b.f(null,b.v.required),tx_icon:new b.f(null,b.v.required),tx_url:new b.f(null,b.v.required)})}ngOnChanges(e){var t,i;e.idMenuSelected&&(null===(t=this.menuForm)||void 0===t||t.patchValue({id_parent:this.idMenuSelected})),e.itemEdit&&(null===(i=this.menuForm)||void 0===i||i.patchValue({cd_role:e.itemEdit.currentValue.cd_role,cd_pricing:e.itemEdit.currentValue.cd_pricing,tx_titulo:e.itemEdit.currentValue.tx_titulo,tx_icon:e.itemEdit.currentValue.tx_icon,tx_url:e.itemEdit.currentValue.tx_url}))}createMenu(e){var t;if(null===(t=this.menuForm)||void 0===t||t.patchValue({id_parent:this.idMenuSelected}),this.menuForm.invalid)return void this.sharedService.snack("Formulario invalido",2e3);const i={id_parent:this.menuForm.value.id_parent,cd_role:this.menuForm.value.cd_role,cd_pricing:this.menuForm.value.cd_pricing,tx_titulo:this.menuForm.value.tx_titulo,tx_icon:this.menuForm.value.tx_icon,tx_url:this.menuForm.value.tx_url};this.itemEdit?(i._id=this.itemEdit._id,this.superuserService.updateMenu(i).subscribe(t=>{t.ok&&(this.itemUpdated.emit(t.menuitem),this.sharedService.snack(t.msg,5e3),this.resetForm(e))},e=>{this.sharedService.snack(e.error.msg,5e3)})):this.superuserService.createMenu(i).subscribe(t=>{this.itemUpdated.emit(t.menuitem),this.sharedService.snack(t.msg,5e3),this.resetForm(e),e.resetForm()},e=>{this.sharedService.snack(e.error.msg,5e3)})}resetForm(e){this.itemEdit=null,this.menuForm.enable(),this.menuForm.reset(),e.resetForm(),this.sharedService.scrollTop()}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(h.a),u.Mb(a.a),u.Mb(d))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-menu-create-form"]],inputs:{idMenuSelected:"idMenuSelected",itemEdit:"itemEdit"},outputs:{itemUpdated:"itemUpdated"},features:[u.yb],decls:24,vars:3,consts:[["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["color","warn",1,"w-100"],["matInput","","placeholder","0","formControlName","cd_role","name","cd_role","type","text","required",""],["matInput","","placeholder","0","formControlName","cd_pricing","name","cd_pricing","type","text","required",""],["matInput","","placeholder","Titulo","formControlName","tx_titulo","name","tx_titulo","type","text","required",""],["matInput","","placeholder","mdi mdi-icon","formControlName","tx_icon","name","tx_icon","type","text","required",""],["matInput","","placeholder","/waiter/home","formControlName","tx_url","name","tx_url","type","text","required",""],["class","row text-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","text-center"],[1,"col"],["class","btn btn-success btn-block text-uppercase","type","submit",4,"ngIf"],["type","submit",1,"btn","btn-success","btn-block","text-uppercase"],[1,"row"],[1,"col","w-100"],["type","submit",1,"btn","btn-danger","btn-block","text-uppercase"],[1,"btn","btn-warning","btn-block","text-uppercase",3,"click"]],template:function(e,t){if(1&e){const e=u.Tb();u.Sb(0,"form",0,1),u.Zb("ngSubmit",function(){u.sc(e);const i=u.rc(1);return t.createMenu(i)}),u.Sb(2,"mat-form-field",2),u.Sb(3,"mat-label"),u.Bc(4,"C\xf3digo de Rol"),u.Rb(),u.Nb(5,"input",3),u.Rb(),u.Sb(6,"mat-form-field",2),u.Sb(7,"mat-label"),u.Bc(8,"C\xf3digo de Pricing"),u.Rb(),u.Nb(9,"input",4),u.Rb(),u.Sb(10,"mat-form-field",2),u.Sb(11,"mat-label"),u.Bc(12,"Titulo"),u.Rb(),u.Nb(13,"input",5),u.Rb(),u.Sb(14,"mat-form-field",2),u.Sb(15,"mat-label"),u.Bc(16,"Icono"),u.Rb(),u.Nb(17,"input",6),u.Rb(),u.Sb(18,"mat-form-field",2),u.Sb(19,"mat-label"),u.Bc(20,"URL"),u.Rb(),u.Nb(21,"input",7),u.Rb(),u.Ac(22,v,3,1,"div",8),u.Ac(23,g,7,0,"div",9),u.Rb()}2&e&&(u.jc("formGroup",t.menuForm),u.Ab(22),u.jc("ngIf",!t.itemEdit),u.Ab(1),u.jc("ngIf",t.itemEdit))},directives:[b.p,b.i,l.c,l.f,f.b,b.d,b.o,b.g,b.u,n.j],styles:[""]}),e})();var I=i("UhP/");function R(e,t){if(1&e){const e=u.Tb();u.Sb(0,"mat-option",15),u.Zb("click",function(){u.sc(e);const i=t.$implicit;return u.dc().getSubItems(i._id)}),u.Sb(1,"span"),u.Sb(2,"span",16),u.Bc(3),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=t.$implicit;u.jc("value",e._id),u.Ab(1),u.Db("",e.tx_icon," text-secondary"),u.Ab(2),u.Cc(e.tx_titulo)}}function x(e,t){if(1&e){const e=u.Tb();u.Sb(0,"tr"),u.Nb(1,"td",20),u.Sb(2,"td"),u.Bc(3),u.Rb(),u.Sb(4,"td",21),u.Sb(5,"span",22),u.Zb("click",function(){u.sc(e);const i=t.$implicit;return u.dc(2).editMenuItem(i)}),u.Rb(),u.Sb(6,"span",23),u.Zb("click",function(){u.sc(e);const i=t.$implicit;return u.dc(2).deleteMenuItem(i._id)}),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=t.$implicit;u.Ab(1),u.Cb(null==e?null:e.tx_icon),u.Ab(2),u.Dc("",null==e?null:e.tx_titulo," ")}}function w(e,t){if(1&e&&(u.Sb(0,"div",17),u.Sb(1,"table",18),u.Ac(2,x,7,4,"tr",19),u.Rb(),u.Rb()),2&e){const e=u.dc();u.Ab(2),u.jc("ngForOf",e.submenuItems)}}let M=(()=>{class e{constructor(e,t){this.superuserService=e,this.sharedService=t,this.allItems=[],this.menuItems=[]}ngOnInit(){this.readMenus()}editMenuItem(e){this.itemEdit=e}menuItemUpdated(e){let t=this.submenuItems.findIndex(t=>t._id===e._id);t>0?this.submenuItems[t]=e:this.submenuItems.push(e)}readMenus(){this.superuserService.readMenus().subscribe(e=>{this.allItems=e.menuitem,this.menuItems=e.menuitem.filter(e=>null===e.id_parent)})}deleteMenuItem(e){this.sharedService.snack("Desea eliminar el menu?",5e3,"ELIMINAR").then(t=>{t&&this.superuserService.deleteMenu(e).subscribe(t=>{this.sharedService.snack(t.msg,5e3),this.submenuItems=this.submenuItems.filter(t=>t._id!=e)},e=>{this.sharedService.snack(e.msg,5e3)})}).catch(()=>{})}getSubItems(e){this.idMenuSelected=e,this.submenuItems=this.allItems.filter(t=>t.id_parent===e)}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(d),u.Mb(a.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-menu"]],decls:20,vars:4,consts:[[1,"saturno-card","animated","fadeIn"],[1,"card","bg-secondary","p-2","text-white"],[1,"card-header"],[1,"mdi","mdi-menu-open"],[1,"card-body","bg-light","rounded"],["color","warn",1,"w-100","bg-light"],["matNativeControl","","required",""],["selectTable",""],[3,"value","click",4,"ngFor","ngForOf"],["class","card-body table-responsive-sm bg-secondary rounded",4,"ngIf"],[1,"my-4"],[1,"card"],[1,"mdi","mdi-plus-circle-outline"],[1,"card-body"],[3,"itemEdit","idMenuSelected","itemUpdated"],[3,"value","click"],[1,"mx-2"],[1,"card-body","table-responsive-sm","bg-secondary","rounded"],[1,"w-100"],[4,"ngFor","ngForOf"],[2,"color","gold"],[2,"text-align","right"],[1,"mdi","mdi-pencil","ml-2","text-success","pointer",3,"click"],[1,"mdi","mdi-delete","ml-2","text-danger","pointer",3,"click"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"div",2),u.Nb(3,"span",3),u.Bc(4," Menus "),u.Rb(),u.Sb(5,"div",4),u.Sb(6,"mat-form-field",5),u.Sb(7,"mat-label"),u.Bc(8,"Seleccione el men\xfa"),u.Rb(),u.Sb(9,"mat-select",6,7),u.Ac(11,R,4,5,"mat-option",8),u.Rb(),u.Rb(),u.Ac(12,w,3,1,"div",9),u.Rb(),u.Rb(),u.Nb(13,"div",10),u.Sb(14,"div",11),u.Sb(15,"div",2),u.Nb(16,"span",12),u.Bc(17," Crear Men\xfa "),u.Rb(),u.Sb(18,"div",13),u.Sb(19,"app-menu-create-form",14),u.Zb("itemUpdated",function(e){return t.menuItemUpdated(e)}),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.Ab(11),u.jc("ngForOf",t.menuItems),u.Ab(1),u.jc("ngIf",t.submenuItems),u.Ab(7),u.jc("itemEdit",t.itemEdit)("idMenuSelected",t.idMenuSelected))},directives:[l.c,l.f,m.a,n.i,n.j,_,I.k],styles:[""]}),e})();const y=[{path:"home",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Gb({type:e,selectors:[["app-home"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Sb(0,"p"),u.Bc(1,"home works!"),u.Rb())},styles:[""]}),e})()},{path:"menu",component:M},{path:"**",component:c.a}];let F=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(y)],r.e]}),e})();var k=i("1+r1");let E=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(t){return new(t||e)},imports:[[n.b,F,b.t,b.j,k.a]]}),e})()}}]);