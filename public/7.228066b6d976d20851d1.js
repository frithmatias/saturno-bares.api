(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{T8Xv:function(t,e,i){"use strict";i.r(e),i.d(e,"PublicModule",function(){return it});var c=i("SVse"),n=i("s7LF"),s=i("iInd"),o=i("PSD3"),r=i.n(o),a=i("8Y7J"),l=i("Gyf/"),b=i("OD9V"),d=i("zHaW"),u=i("jMqV"),m=i("Q2Ze"),p=i("e6WT"),h=i("ZTz/"),S=i("UhP/");function f(t,e){1&t&&(a.Sb(0,"h5",22),a.Sb(1,"span",23),a.Bc(2," Cargando... "),a.Rb(),a.Rb())}function k(t,e){if(1&t&&(a.Sb(0,"div"),a.Sb(1,"p",24),a.Bc(2," \xa1Bienvenido! Est\xe1s por sacar un turno para ser atendido en "),a.Rb(),a.Sb(3,"div",25),a.Sb(4,"p",26),a.Bc(5),a.Rb(),a.Sb(6,"p",24),a.Bc(7),a.Rb(),a.Rb(),a.Rb()),2&t){const t=a.dc(2);a.Ab(5),a.Dc(" ",t.publicService.company.tx_company_name," "),a.Ab(2),a.Fc(" ",t.publicService.company.tx_address_street," ",t.publicService.company.tx_address_number," ",t.publicService.company.cd_city," ")}}function g(t,e){if(1&t&&(a.Sb(0,"mat-option",27),a.Bc(1),a.Rb()),2&t){const t=e.$implicit;a.jc("value",t._id),a.Ab(1),a.Dc(" ",t.tx_section,"")}}function v(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div"),a.Ac(1,f,3,0,"h5",2),a.Ac(2,k,8,4,"div",1),a.Sb(3,"div",3),a.Sb(4,"div",4),a.Sb(5,"div",5),a.Sb(6,"div"),a.Nb(7,"span",6),a.Nb(8,"span",7),a.Rb(),a.Sb(9,"div"),a.Nb(10,"span",8),a.Nb(11,"span",9),a.Rb(),a.Rb(),a.Sb(12,"div",10),a.Sb(13,"p",11),a.Bc(14,"Prioritario"),a.Rb(),a.Sb(15,"mat-slide-toggle",12),a.Zb("ngModelChange",function(e){return a.sc(t),a.dc().blPriority=e}),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(16,"form",13,14),a.Sb(18,"mat-form-field",15),a.Sb(19,"mat-label"),a.Bc(20,"Cantidad de Personas"),a.Rb(),a.Nb(21,"input",16),a.Rb(),a.Sb(22,"mat-form-field",15),a.Sb(23,"mat-label"),a.Bc(24,"Sector"),a.Rb(),a.Sb(25,"mat-select",17),a.Ac(26,g,2,2,"mat-option",18),a.Rb(),a.Rb(),a.Sb(27,"div",19),a.Sb(28,"button",20),a.Zb("click",function(){return a.sc(t),a.dc().salir()}),a.Bc(29," Salir "),a.Rb(),a.Sb(30,"button",21),a.Zb("click",function(){return a.sc(t),a.dc().createTicket()}),a.Bc(31," Solicitar "),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.dc();a.Ab(1),a.jc("ngIf",t.loading),a.Ab(1),a.jc("ngIf",!t.loading),a.Ab(13),a.jc("ngModel",t.blPriority),a.Ab(1),a.jc("formGroup",t.ticketForm),a.Ab(10),a.jc("ngForOf",t.sections)}}let y=(()=>{class t{constructor(t,e,i,c){this.wsService=t,this.publicService=e,this.router=i,this.snack=c,this.loading=!1,this.sections=[],this.blPriority=!1}ngOnInit(){if(this.ticketForm=new n.h({nmPersons:new n.f("",[n.v.required]),idSection:new n.f("",[n.v.required])}),this.publicService.ticket)this.snack.open("Ya ten\xe9s un turno!",null,{duration:2e3}),this.router.navigate(["/public/myticket"]);else if(this.publicService.company){let t=this.publicService.company._id;this.wsService.emit("enterCompany",t),this.publicService.readSections(t).subscribe(t=>{this.sections=t.sections})}else this.snack.open("Por favor ingres\xe1 una empresa primero.",null,{duration:2e3}),this.router.navigate(["/public"])}createTicket(){localStorage.getItem("user")?r.a.fire({icon:"error",title:"Est\xe1s haciendo pruebas?",text:"Est\xe1s en una p\xe1gina de acceso al p\xfablico pero ten\xe9s una sesi\xf3n de usuario activa. Para obtener un turno ten\xe9s cerrar la sesi\xf3n de usuario o abrir una pesta\xf1a en modo inc\xf3gnito."}):(this.loading=!0,this.publicService.createTicket(this.wsService.idSocket,this.blPriority,this.ticketForm.value.nmPersons,this.ticketForm.value.idSection).subscribe(t=>{t.ok&&(localStorage.setItem("ticket",JSON.stringify(t.ticket)),this.publicService.ticket=t.ticket,this.loading=!1,this.router.navigate(["/public/myticket"]))}))}salir(){this.publicService.clearPublicSession(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(l.a),a.Mb(b.a),a.Mb(s.b),a.Mb(d.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-tickets"]],decls:2,vars:1,consts:[[1,"saturno-card","shadow-box","animated","fadeIn"],[4,"ngIf"],["class","card-title",4,"ngIf"],[1,"container"],[1,"row","rounded","border","border-success","mb-3"],[1,"col","bg-success","text-white","p-2"],[1,"mdi","mdi-human-wheelchair","m-2",2,"font-size","xx-large"],[1,"mdi","mdi-human-pregnant","m-2",2,"font-size","xx-large"],[1,"mdi","mdi-baby-carriage","m-2",2,"font-size","xx-large"],[1,"mdi","mdi-human-cane","m-2",2,"font-size","xx-large"],[1,"col","m-3"],[1,"text-uppercase","mx-2","font-weight-bold"],[3,"ngModel","ngModelChange"],["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup"],["formDirective","ngForm"],["color","warn","logincss","",1,"w-100"],["matInput","","placeholder","Cantidad de Personas","formControlName","nmPersons","name","nmPersons","type","number","required",""],["formControlName","idSection","name","idSection","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","mx-0"],[1,"col","btn","btn-danger","btn-block","rounded-0","mr-1","my-2",3,"click"],[1,"col","btn","btn-success","btn-block","rounded-0","ml-1","my-2",3,"click"],[1,"card-title"],["id","lblNuevoTicket"],[1,"lg","text-secondary"],[1,"card","pb-2","pt-4","mb-4"],[1,"xxl","text-primary"],[3,"value"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Ac(1,v,32,5,"div",1),a.Rb()),2&t&&(a.Ab(1),a.jc("ngIf",e.publicService.company))},directives:[c.j,u.a,n.o,n.r,n.p,n.i,m.c,m.f,p.b,n.d,n.s,n.g,n.u,h.a,c.i,S.k],styles:[""]}),t})();var _=i("zuHl"),R=i("vrAh");function A(t,e){if(1&t&&(a.Sb(0,"mat-option",19),a.Bc(1),a.Rb()),2&t){const t=e.$implicit;a.jc("value",t),a.Ab(1),a.Dc(" ",t.tx_company_name," ")}}function w(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",4),a.Nb(1,"span",5),a.Nb(2,"span",6),a.Nb(3,"span",7),a.Nb(4,"span",8),a.Nb(5,"span",9),a.Sb(6,"div",10),a.Bc(7,"Encontrar un comercio"),a.Rb(),a.Sb(8,"div"),a.Sb(9,"mat-form-field",11),a.Sb(10,"mat-label"),a.Bc(11,"Ingrese la empresa aqu\xed"),a.Rb(),a.Sb(12,"input",12,13),a.Zb("keyup",function(){a.sc(t);const e=a.rc(13);return a.dc().findCompany(e)}),a.Rb(),a.Sb(14,"span",14),a.Zb("click",function(){a.sc(t);const e=a.rc(13);return a.dc().cleanInput(e)}),a.Nb(15,"i",15),a.Rb(),a.Rb(),a.Sb(16,"mat-autocomplete",16,17),a.Zb("optionSelected",function(e){return a.sc(t),a.dc().setCompany(e.option.value)}),a.Ac(18,A,2,2,"mat-option",18),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.rc(17),e=a.dc();a.Ab(12),a.jc("matAutocomplete",t)("value",null==e.companySelected?null:e.companySelected.tx_company_name),a.Ab(6),a.jc("ngForOf",e.companies)}}function x(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",20),a.Sb(1,"p",21),a.Bc(2," Est\xe1s por ir hacia la recepci\xf3n de turnos de "),a.Rb(),a.Sb(3,"div",22),a.Sb(4,"p",23),a.Bc(5),a.Rb(),a.Sb(6,"p",24),a.Bc(7),a.Rb(),a.Rb(),a.Sb(8,"button",25),a.Zb("click",function(){return a.sc(t),a.dc().goToCompany()}),a.Bc(9),a.Rb(),a.Rb()}if(2&t){const t=a.dc();a.Ab(5),a.Dc(" ",t.companySelected.tx_company_name," "),a.Ab(2),a.Fc(" ",t.companySelected.tx_address_street," ",t.companySelected.tx_address_number," ",t.companySelected.cd_city," "),a.Ab(2),a.Dc("Ir a ",t.companySelected.tx_company_name," ")}}let I=(()=>{class t{constructor(t,e,i){this.router=t,this.publicService=e,this.sharedService=i,this.companies=[]}ngOnInit(){}ngAfterViewInit(){document.getElementById("inputCompany").focus()}findCompany(t){t.value.length>1&&this.publicService.findCompany(t.value).subscribe(e=>{e.ok?this.companies=e.companies:(t.value="",this.sharedService.snack("No existen resultados.",2e3,null))},()=>{this.sharedService.snack("Error al obtener las empresas",2e3,null)})}goToCompany(){this.companySelected&&(localStorage.setItem("company",JSON.stringify(this.companySelected)),this.publicService.company=this.companySelected,this.router.navigate(["/public/",this.companySelected.tx_public_name]))}setCompany(t){this.companySelected=t}cleanInput(t){t.value=null}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(s.b),a.Mb(b.a),a.Mb(_.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-search"]],decls:5,vars:2,consts:[[1,"saturno-card","saturno-bg-white","shadow-box","animated","fadeIn"],["class","jumbotron text-dark",4,"ngIf"],["class","animated fadeIn jumbotron",4,"ngIf"],["routerLink","/",2,"cursor","pointer"],[1,"jumbotron","text-dark"],[1,"mdi","mdi-domain","icon-search-company"],[1,"mdi","mdi-store","icon-search-company"],[1,"mdi","mdi-hospital-building","icon-search-company"],[1,"mdi","mdi-storefront-outline","icon-search-company"],[1,"mdi","mdi-office-building","icon-search-company"],[1,"xl","my-3","text-danger"],["color","warn","logincss","",1,"w-100"],["id","inputCompany","matInput","","placeholder","Empresa S.A.",3,"matAutocomplete","value","keyup"],["inputCompany",""],[1,"input-icon",3,"click"],[1,"mdi","mdi-close"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"animated","fadeIn","jumbotron"],[1,"lead"],[1,"card","py-4","my-4"],[1,"text-company"],[1,"my-0",2,"color","darkblue","font-size","1rem","font-weight","400"],[1,"btn","btn-success","btn-lg","btn-block",3,"click"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Ac(1,w,19,3,"div",1),a.Ac(2,x,10,5,"div",2),a.Sb(3,"div",3),a.Bc(4," Volver al inicio "),a.Rb(),a.Rb()),2&t&&(a.Ab(1),a.jc("ngIf",!e.companySelected),a.Ab(1),a.jc("ngIf",e.companySelected))},directives:[c.j,s.c,m.c,m.f,p.b,R.c,R.a,c.i,S.k],styles:[".icon-search-company[_ngcontent-%COMP%]{width:36px!important;color:#a9a9a9;font-size:3em;letter-spacing:.2em;opacity:.5}"]}),t})();var T=i("AIE+"),j=i("AXWi"),C=i("mrSG"),B=i("XNiG"),P=i("l5mm"),M=i("wd/R"),O=i.n(M);function N(t,e){if(1&t&&(a.Sb(0,"span"),a.Bc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Dc(" ",t.averageToAtt," ")}}function E(t,e){if(1&t&&(a.Sb(0,"span"),a.Bc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Dc(" Pase a la mesa ",null==t.ticket||null==t.ticket.id_session?null:t.ticket.id_session.id_tables[0].nm_table," ")}}function z(t,e){if(1&t&&(a.Sb(0,"span"),a.Bc(1),a.Rb()),2&t){const t=e.$implicit;a.Ab(1),a.Dc(" ",t.nm_table," ")}}function D(t,e){if(1&t&&(a.Sb(0,"span"),a.Bc(1," Pase a las mesas "),a.Ac(2,z,2,1,"span",18),a.Rb()),2&t){const t=a.dc(2);a.Ab(2),a.jc("ngForOf",null==t.ticket||null==t.ticket.id_session?null:t.ticket.id_session.id_tables)}}const F=function(t){return{"screen-myticket-text-alert":t}};function Z(t,e){if(1&t&&(a.Sb(0,"div",19),a.Sb(1,"div",20),a.Bc(2," SU TURNO "),a.Rb(),a.Sb(3,"div",21),a.Bc(4),a.Rb(),a.Sb(5,"div",22),a.Ac(6,N,2,1,"span",17),a.Ac(7,E,2,1,"span",17),a.Ac(8,D,3,1,"span",17),a.Rb(),a.Rb()),2&t){const t=a.dc();a.Ab(3),a.jc("ngClass",a.mc(5,F,t.showAlert)),a.Ab(1),a.Dc(" ",null==t.ticket?null:t.ticket.id_position," "),a.Ab(2),a.jc("ngIf",!(null!=t.ticket&&t.ticket.id_session)),a.Ab(1),a.jc("ngIf",(null==t.ticket?null:t.ticket.id_session)&&1===(null==t.ticket||null==t.ticket.id_session||null==t.ticket.id_session.id_tables?null:t.ticket.id_session.id_tables.length)),a.Ab(1),a.jc("ngIf",(null==t.ticket?null:t.ticket.id_session)&&(null==t.ticket||null==t.ticket.id_session||null==t.ticket.id_session.id_tables?null:t.ticket.id_session.id_tables.length)>1)}}const $=function(t){return{"screen-icon-star-on":t}};function G(t,e){if(1&t){const t=a.Tb();a.Sb(0,"tr"),a.Sb(1,"td",28),a.Bc(2),a.Rb(),a.Sb(3,"td",29),a.Sb(4,"span",30),a.Zb("click",function(){a.sc(t);const i=e.$implicit;return a.dc(3).setScore(i._id,1)}),a.Rb(),a.Rb(),a.Sb(5,"td",29),a.Sb(6,"span",30),a.Zb("click",function(){a.sc(t);const i=e.$implicit;return a.dc(3).setScore(i._id,2)}),a.Rb(),a.Rb(),a.Sb(7,"td",29),a.Sb(8,"span",30),a.Zb("click",function(){a.sc(t);const i=e.$implicit;return a.dc(3).setScore(i._id,3)}),a.Rb(),a.Rb(),a.Sb(9,"td",29),a.Sb(10,"span",30),a.Zb("click",function(){a.sc(t);const i=e.$implicit;return a.dc(3).setScore(i._id,4)}),a.Rb(),a.Rb(),a.Sb(11,"td",29),a.Sb(12,"span",30),a.Zb("click",function(){a.sc(t);const i=e.$implicit;return a.dc(3).setScore(i._id,5)}),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=e.$implicit,i=a.dc(3);a.Ab(2),a.Dc(" ",t.tx_item," "),a.Ab(2),a.jc("ngClass",a.mc(6,$,i.scores.get(t._id)>=1)),a.Ab(2),a.jc("ngClass",a.mc(8,$,i.scores.get(t._id)>=2)),a.Ab(2),a.jc("ngClass",a.mc(10,$,i.scores.get(t._id)>=3)),a.Ab(2),a.jc("ngClass",a.mc(12,$,i.scores.get(t._id)>=4)),a.Ab(2),a.jc("ngClass",a.mc(14,$,i.scores.get(t._id)>=5))}}function U(t,e){if(1&t&&(a.Sb(0,"div"),a.Sb(1,"div",25),a.Bc(2," \xbfPodr\xeda dejarnos su opini\xf3n? "),a.Rb(),a.Sb(3,"div",26),a.Sb(4,"table",27),a.Ac(5,G,13,16,"tr",18),a.Rb(),a.Rb(),a.Rb()),2&t){const t=a.dc(2);a.Ab(5),a.jc("ngForOf",t.scoreItems)}}function J(t,e){if(1&t&&(a.Sb(0,"div",23),a.Sb(1,"div",24),a.Bc(2,"\xa1Gracias por su visita!"),a.Rb(),a.Ac(3,U,6,1,"div",17),a.Rb()),2&t){const t=a.dc();a.Ab(3),a.jc("ngIf",t.scoreItems.length>0)}}function V(t,e){1&t&&(a.Sb(0,"tr"),a.Sb(1,"td"),a.Bc(2,"--"),a.Rb(),a.Sb(3,"td"),a.Bc(4,"--"),a.Rb(),a.Sb(5,"td"),a.Bc(6,"--"),a.Rb(),a.Rb())}function W(t,e){1&t&&(a.Sb(0,"span",36),a.Nb(1,"span",37),a.Rb())}function q(t,e){1&t&&(a.Sb(0,"span",38),a.Nb(1,"span",39),a.Rb())}function L(t,e){1&t&&(a.Sb(0,"span",40),a.Nb(1,"span",41),a.Rb())}function X(t,e){if(1&t&&(a.Sb(0,"tr"),a.Sb(1,"td",31),a.Bc(2),a.Rb(),a.Sb(3,"td",31),a.Bc(4),a.Rb(),a.Sb(5,"td",32),a.Ac(6,W,2,0,"span",33),a.Ac(7,q,2,0,"span",34),a.Ac(8,L,2,0,"span",35),a.Rb(),a.Rb()),2&t){const t=e.$implicit;a.Ab(2),a.Dc(" ",t.id_position,""),a.Ab(2),a.Dc(" ",t.id_session.id_tables.nm_table,""),a.Ab(2),a.jc("ngIf",!t.tm_end),a.Ab(1),a.jc("ngIf",t.id_child&&t.tm_end),a.Ab(1),a.jc("ngIf",!t.id_child&&t.tm_end)}}const H=function(t){return{"button-disabled":t}},K=[{path:"tickets",component:y},{path:"myticket",component:(()=>{class t{constructor(t,e,i,c,n){this.wsService=t,this.publicService=e,this.sharedService=i,this.snack=c,this.router=n,this.showAlert=!1,this.coming=!1,this.ticketTmEnd=null,this.tickets=[],this.ticketsTail=[],this.scoreItems=[],this.scores=new Map,this.subjectUpdateTickets$=new B.a}ngOnInit(){if(!this.publicService.ticket)return this.router.navigate(["/public/tickets"]),void this.sharedService.snack("Debe obtener un turno primero.",5e3);this.coming=!1,document.getElementsByTagName("body")[0].classList.remove("container"),this.wsService.updateTicketsClients().subscribe(this.subjectUpdateTickets$),this.subjectUpdateTickets$.subscribe(()=>{this.getTickets()}),this.publicService.company&&this.publicService.ticket?(this.ticket=this.publicService.ticket,this.publicService.getTickets(this.publicService.company._id)):(this.router.navigate(["/public"]),this.snack.open("Por favor ingrese una empresa primero!",null,{duration:5e3})),this.getTickets()}getTickets(){return Object(C.a)(this,void 0,void 0,function*(){this.ticket&&this.publicService.getTickets(this.ticket.id_company).subscribe(t=>{var e;if(t.ok){this.tickets=t.tickets,this.ticketsTail=t.tickets.filter(t=>null!==t.tm_provided).sort((t,e)=>e.tm_provided-t.tm_provided).slice(0,5),this.pickMyTicket(),(null===(e=this.ticket)||void 0===e?void 0:e.id_session)&&!this.timer?this.timer=Object(P.a)(500).subscribe(t=>{this.showAlert=!this.showAlert}):(this.timer&&this.timer.unsubscribe(),this.showAlert=!1),this.ticket&&null===this.ticket.tm_provided&&this.calculateTimeToAtt();const i=new Audio;i.src="../../assets/bell.wav",i.load(),i.play()}})})}pickMyTicket(){const t=this.tickets.filter(t=>t._id===this.ticket._id)[0];t&&(null!==t.tm_end?this.getScoreItems().then(()=>{this.ticketTmEnd=t.tm_end,this.publicService.clearPublicSession()}):(this.ticket=t,this.publicService.ticket=t,localStorage.setItem("ticket",JSON.stringify(this.ticket))))}calculateTimeToAtt(){let t=this.tickets.filter(t=>null!==t.tm_end),e=this.tickets.filter(t=>null===t.tm_end),i=t.sort((t,e)=>e.tm_end-t.tm_end).slice(0,5).filter(t=>null!==t.tm_att);if(0===i.length)return void(this.averageToAtt="Sin datos todav\xeda");t.sort((t,e)=>e.id_session>t.id_session?-1:1).slice(0,5);let c=0;for(let l of i)c+=l.tm_end-l.tm_att;let n=0,s=null;for(let l of i){let t=0,e=0;l.id_session===s?(t=l.tm_end,n+=l.tm_att-l.tm_att,e=0,t=0):e=l.tm_att,s=l._id,0===n&&(e=l.tm_att)}let o=0;for(let l of e){if(l._id===this.ticket._id)break;o++}this.ticketsAhead=o;let r=c/i.length,a=n/i.length;this.averageToAtt="Su mesa estar\xe1 lista en "+O.a.duration((r+a)*this.ticketsAhead+(r+a)/4).humanize()}toggle(t){t.toggle()}enCamino(){this.coming=!0,this.wsService.emit("cliente-en-camino",this.publicService.ticket.id_socket_waiter)}callWaiter(t){this.publicService.callWaiter(this.ticket._id,t).subscribe(t=>{t.ok&&(this.ticket.tx_call=t.ticket.tx_call,this.snack.open(t.msg,"ACEPTAR",{duration:2e3}))})}endTicket(){return new Promise(t=>{this.sharedService.snack("Esta acci\xf3n finalizara su turno",5e3,"TERMINAR").then(e=>{e&&this.publicService.endTicket(this.ticket._id).subscribe(e=>{e.ok&&(t(),this.snack.open(e.msg,"ACEPTAR",{duration:2e3}),this.publicService.clearPublicSession(),this.router.navigate(["/public"]))})})})}getScoreItems(){return new Promise(t=>{this.publicService.getScoreItems(this.ticket.id_section._id).subscribe(e=>{this.scoreItems=e.scoreitems,t()})})}setScore(t,e){if(this.scores.set(t,e),this.scores.size===this.scoreItems.length){let t=this.ticket._id,e=[];this.scores.forEach(function(i,c,n){e.push({id_ticket:t,id_scoreitem:c,cd_score:i})}),this.publicService.sendScores(e).subscribe(t=>{t.ok&&delete this.ticket}),r.a.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",r.a.stopTimer),t.addEventListener("mouseleave",r.a.resumeTimer)}}).fire({icon:"success",title:"\xa1Gracias!"}).then(t=>{t.isDismissed&&this.publicService.clearPublicSessionComplete()})}}ngOnDestroy(){this.subjectUpdateTickets$.complete(),this.timer&&this.timer.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(l.a),a.Mb(b.a),a.Mb(_.a),a.Mb(d.a),a.Mb(s.b))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-myticket"]],decls:40,vars:16,consts:[[1,"saturno-bg-tile-1"],[1,"saturno-card","m-0"],["class","screen-myticket-container shadow-box my-3",4,"ngIf"],["class","card text-white bg-dark p-3 my-4",4,"ngIf"],[1,"container","row","px-0"],[1,"col-12","col-sm-6","col-lg-4","p-1"],[1,"btn","btn-success","btn-block","p-0",3,"disabled","ngClass","click"],["width","100%",1,"shadow-box"],[1,"rounded-left",2,"background-color","rgba(50, 50, 50, 0.3)"],[1,"mdi","mdi-silverware-fork-knife","xl"],[1,"btn","btn-danger","btn-block","p-0",3,"disabled","ngClass","click"],[1,"mdi","mdi-file-document-edit-outline","xl"],[1,"btn","btn-dark","btn-block","p-0",3,"disabled","ngClass","click"],[1,"mdi","mdi-power","xl"],[1,"card","shadow-box","p-2","my-4"],[1,"w-100","table-sm","text-center"],[1,"screen-history-title"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"screen-myticket-container","shadow-box","my-3"],[1,"screen-myticket-text-header"],[1,"screen-myticket-text",3,"ngClass"],[1,"screen-myticket-text-footer","mt-3",2,"line-height","normal"],[1,"card","text-white","bg-dark","p-3","my-4"],[1,"xl"],[1,"md","my-3","text-warning"],[1,"text-white","mt-4","table-responsive-sm"],[1,"table","table-sm","text-white","m-0"],[1,"lg","py-2"],[1,"p-0","py-2"],[1,"mdi","mdi-star","screen-icon-star",3,"ngClass","click"],[1,"screen-history-text",2,"text-align","center"],[2,"padding","0","vertical-align","middle"],["style","color: blueviolet",4,"ngIf"],["style","color: red",4,"ngIf"],["style","color: green",4,"ngIf"],[2,"color","blueviolet"],[1,"mdi","mdi-contactless-payment-circle-outline","screen-history-icon"],[2,"color","red"],[1,"mdi","mdi-arrow-left-circle-outline","screen-history-icon"],[2,"color","green"],[1,"mdi","mdi-check-circle-outline","screen-history-icon"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Ac(2,Z,9,7,"div",2),a.Ac(3,J,4,1,"div",3),a.Sb(4,"div",4),a.Sb(5,"div",5),a.Sb(6,"button",6),a.Zb("click",function(){return e.callWaiter("waiter")}),a.Sb(7,"table",7),a.Sb(8,"tr"),a.Sb(9,"td",8),a.Nb(10,"div",9),a.Rb(),a.Sb(11,"td"),a.Bc(12,"Llamar al mozo"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(13,"div",5),a.Sb(14,"button",10),a.Zb("click",function(){return e.callWaiter("account")}),a.Sb(15,"table",7),a.Sb(16,"tr"),a.Sb(17,"td",8),a.Nb(18,"div",11),a.Rb(),a.Sb(19,"td"),a.Bc(20," Pedir la Cuenta"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(21,"div",5),a.Sb(22,"button",12),a.Zb("click",function(){return e.endTicket()}),a.Sb(23,"table",7),a.Sb(24,"tr"),a.Sb(25,"td",8),a.Nb(26,"div",13),a.Rb(),a.Sb(27,"td"),a.Bc(28," Cancelar mi Turno"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(29,"div",14),a.Sb(30,"table",15),a.Sb(31,"tr"),a.Sb(32,"td",16),a.Bc(33," TURNO "),a.Rb(),a.Sb(34,"td",16),a.Bc(35," MESA"),a.Rb(),a.Sb(36,"td",16),a.Bc(37," ESTADO "),a.Rb(),a.Rb(),a.Ac(38,V,7,0,"tr",17),a.Ac(39,X,9,5,"tr",18),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.Ab(2),a.jc("ngIf",null===e.ticketTmEnd),a.Ab(1),a.jc("ngIf",null!==e.ticketTmEnd),a.Ab(3),a.jc("disabled",(null==e.ticket?null:e.ticket.tx_call)||!(null!=e.ticket&&e.ticket.id_session))("ngClass",a.mc(10,H,(null==e.ticket?null:e.ticket.tx_call)||!(null!=e.ticket&&e.ticket.id_session))),a.Ab(8),a.jc("disabled",!(null!=e.ticket&&e.ticket.id_session))("ngClass",a.mc(12,H,!(null!=e.ticket&&e.ticket.id_session))),a.Ab(8),a.jc("disabled",!e.ticket)("ngClass",a.mc(14,H,!e.ticket)),a.Ab(16),a.jc("ngIf",0===e.ticketsTail.length),a.Ab(1),a.jc("ngForOf",e.ticketsTail))},directives:[c.j,c.h,c.i],styles:[".screen-icon-star[_ngcontent-%COMP%]{cursor:pointer;color:#5e5e5e;font-size:x-large}.screen-icon-star-on[_ngcontent-%COMP%]{color:orange}.screen-myticket-container[_ngcontent-%COMP%]{padding:2em;width:13em;height:13em;line-height:3em;border-radius:50%;color:#2f4f4f;background-color:#fcfcfc}.screen-myticket-text-header[_ngcontent-%COMP%]{font-size:1.2em;color:grey}.screen-myticket-text[_ngcontent-%COMP%]{font-size:3.5em;color:red}.screen-myticket-text-alert[_ngcontent-%COMP%]{opacity:.1}.screen-myticket-text-footer[_ngcontent-%COMP%]{font-size:1em;color:grey}.screen-history-title[_ngcontent-%COMP%]{font-size:calc(.8em + .8vw);color:grey}.screen-history-text[_ngcontent-%COMP%]{font-size:calc(1em + .8vw)}.screen-history-icon[_ngcontent-%COMP%]{font-size:calc(1.2em + .8vw)}"]}),t})()},{path:"",component:I},{path:":company",component:j.a},{path:"**",component:T.a}];let Y=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(K)],s.e]}),t})();var Q=i("1+r1"),tt=i("j1ZV"),et=i("iTUp");let it=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[c.b,n.t,n.j,Q.a,tt.a,Y,et.a]]}),t})()}}]);